{"version":3,"file":"bitrix24.bundle.js","sources":["../src/js/partner-form/show-partner-connect-form.js","../src/js/partner-form/show-partner-order-form.js","../src/js/partner-form/show-helper.js","../src/js/partner-form/partner-form.js","../src/js/chat-menu.js","../src/js/helpers.js","../src/js/composite.js","../src/js/right-bar.js","../src/js/header/header.js","../src/js/footer.js","../src/js/go-top-button.js","../src/js/collaboration-menu.js","../src/js/site-template.js","../src/js/header/search-title.js","../src/js/header/avatar-button.js","../src/js/header/license-button.js","../src/js/header/invitation-button.js","../src/js/language-switcher.js","../src/index.js"],"sourcesContent":["import { Loc, Runtime } from 'main.core';\nimport { type Popup as PopupInstance, type PopupOptions } from 'main.popup';\n\nexport type ShowPartnerFormParams = {\n\tpartnerId: string;\n\tpartnerName: string;\n\tpartnerUrl: string;\n\tmessages: { [string]: string }\n};\n\nexport async function showPartnerConnectForm(params: ShowPartnerFormParams)\n{\n\tLoc.setMessage(params.messages);\n\tawait showPartnerFormPopup({\n\t\t...params,\n\t\ttitleBar: Loc.getMessage('BX24_PARTNER_TITLE'),\n\t\tsendButtonText: Loc.getMessage('BX24_BUTTON_SEND'),\n\t});\n}\n\ntype ShowPartnerFormPopupOptions = {\n\ttitleBar: string;\n\tsendButtonText: string;\n\tpartnerId: string;\n\tpartnerName: string;\n\tpartnerUrl: string;\n\tarParams: Object;\n}\nasync function showPartnerFormPopup(options: ShowPartnerFormPopupOptions): Popup\n{\n\tconst titleBar = options.titleBar;\n\tconst sendButtonText = options.sendButtonText;\n\tconst partnerName = options.partnerName;\n\tconst partnerUrl = options.partnerUrl;\n\n\tconst [{ Popup }, { Button, ButtonColor }] = await Promise.all([\n\t\tRuntime.loadExtension('main.popup'),\n\t\tRuntime.loadExtension('ui.buttons'),\n\t]);\n\n\tconst popupOptions: PopupOptions = {\n\t\tclassName: 'bitrix24-partner__popup',\n\t\tautoHide: false,\n\t\tcacheable: false,\n\t\tzIndex: 0,\n\t\toffsetLeft: 0,\n\t\toffsetTop: 0,\n\t\twidth: 540,\n\t\theight: 350,\n\t\toverlay: true,\n\t\tdraggable: { restrict: true },\n\t\tcloseByEsc: true,\n\t\ttitleBar,\n\t\tcloseIcon: true,\n\t\tcontent: `\n\t\t\t<div class=\"bitrix24-partner__popup-content\">\n\t\t\t\t<div class=\"bitrix24-partner__popup-content_title\">${Loc.getMessage('PARTNER_TITLE_FOR_NAME')}</div>\n\t\t\t\t<div class=\"bitrix24-partner__popup-content_main\">\n\t\t\t\t\t<div class=\"bitrix24-partner__popup-content_name\">${partnerName}</div>\n\t\t\t\t\t<a class=\"bitrix24-partner__popup-content_link\" href=\"${encodeURI(partnerUrl)}\" target=\"_blank\">${Loc.getMessage('PARTNER_LINK_NAME_MORE')}</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bitrix24-partner__popup-content_desc\">${Loc.getMessage('PARTNER_POPUP_DESCRIPTION_BOTTOM')}</div>\n\t\t\t</div>\n\t\t`,\n\t\tbuttons: [\n\t\t\tnew Button({\n\t\t\t\tcolor: ButtonColor.SUCCESS,\n\t\t\t\ttext: sendButtonText,\n\t\t\t\tonclick: async (button: Button) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tbutton.setClocking(true);\n\t\t\t\t\t}, 200);\n\t\t\t\t\tawait showIntegratorApplicationForm();\n\t\t\t\t\tbutton.setClocking(false);\n\t\t\t\t},\n\t\t\t}),\n\t\t],\n\t};\n\n\tconst popup: PopupInstance = new Popup(popupOptions);\n\n\tpopup.show();\n}\n\nasync function showIntegratorApplicationForm(): void\n{\n\tconst { Form } = await Runtime.loadExtension('ui.feedback.form');\n\n\tForm.open({\n\t\tid: `intranet-license-partner-form-${parseInt(Math.random() * 1000, 10)}`,\n\t\tportalUri: 'https://bitrix24.team',\n\t\tforms: [\n\t\t\t{ zones: ['de'], id: 883, lang: 'de', sec: 'a12ty8' },\n\t\t\t{ zones: ['com', 'in', 'eu', 'uk'], id: 735, lang: 'en', sec: 'vlhmlv' },\n\t\t\t{ zones: ['es', 'co', 'mx'], id: 900, lang: 'es', sec: 'w3qmwq' },\n\t\t\t{ zones: ['com.br'], id: 901, lang: 'pt', sec: 'prnm4x' },\n\t\t\t{ zones: ['cn/tc'], id: 902, lang: 'cn-tc', sec: 'z8isyg' },\n\t\t\t{ zones: ['cn'], id: 903, lang: 'cn-sc', sec: 'hsxnam' },\n\t\t\t{ zones: ['pl'], id: 904, lang: 'pl', sec: '2ph9ph' },\n\t\t\t{ zones: ['it'], id: 905, lang: 'it', sec: '2r3owa' },\n\t\t\t{ zones: ['fr'], id: 906, lang: 'fr', sec: 'jt2fii' },\n\t\t\t{ zones: ['com.tr'], id: 907, lang: 'tr', sec: 'ovevp8' },\n\t\t\t{ zones: ['id'], id: 908, lang: 'id', sec: '7kq7v2' },\n\t\t\t{ zones: ['com/my'], id: 909, lang: 'ms', sec: 'kmncmj' },\n\t\t\t{ zones: ['com/th'], id: 910, lang: 'th', sec: 'sknbp9' },\n\t\t\t{ zones: ['vn'], id: 911, lang: 'vn', sec: 'a573fy' },\n\t\t\t{ zones: ['jp'], id: 912, lang: 'jp', sec: '3purdq' },\n\t\t\t{ zones: ['ru'], id: 2122, lang: 'ru', sec: '8vralr' },\n\t\t\t{ zones: ['kz'], id: 2128, lang: 'ru', sec: '054phh' },\n\t\t\t{ zones: ['by'], id: 2129, lang: 'ru', sec: 'srs85j' },\n\t\t],\n\t\tdefaultForm: { id: 735, lang: 'en', sec: 'vlhmlv' },\n\t});\n}\n","import { type PopupOptions, type Popup as PopupInstance } from 'main.popup';\nimport { Type, Runtime } from 'main.core';\n\nexport type ShowPartnerOrderFormParams = {\n\tid: string | number;\n\tsec: string | number;\n};\n\nexport async function showPartnerOrderForm(params: ShowPartnerOrderFormParams)\n{\n\tif (Type.isObject(params) === false)\n\t{\n\t\treturn;\n\t}\n\n\tconst { Popup } = await Runtime.loadExtension('main.popup');\n\n\tconst popupOptions: PopupOptions = {\n\t\tid: 'B24PartnerOrderForm',\n\t\tautoHide: true,\n\t\tnoAllPaddings: true,\n\t\tzIndex: 0,\n\t\toffsetLeft: 0,\n\t\toffsetTop: 0,\n\t\toverlay: true,\n\t\tborderRadius: '10px',\n\t\tcontentBorderRadius: '10px',\n\t\tdisableScroll: true,\n\t\theight: Math.min(window.innerHeight - 60, 758),\n\t\twidth: 560,\n\t\tdraggable: { restrict: true },\n\t\tcloseByEsc: true,\n\t\tcontentColor: 'white',\n\t\tcontentNoPaddings: true,\n\t\tcacheable: false,\n\t\tcontent: `\n\t\t\t<script data-b24-form=\"inline/${params.id}/${params.sec}\" data-skip-moving=\"true\">\n\t\t\t\t(function(w, d,u) {\n\t\t\t\t\tvar s = d.createElement(\"script\");\n\t\t\t\t\ts.async=true;\n\t\t\t\t\ts.src=u + \"?\" + (Date.now()/180000|0);\n\t\t\t\t\tvar h = d.getElementsByTagName(\"script\")[0];\n\t\t\t\t\th.parentNode.insertBefore(s,h);\n\t\t\t\t})(window,document,\"https://bitrix24.team/upload/crm/form/loader_${params.id}_${params.sec}.js\")\n\t\t\t</script>\n\t\t`,\n\t\tevents: {\n\t\t\tonPopupFirstShow()\n\t\t\t{\n\t\t\t\t(function(w, d, u) {\n\t\t\t\t\tvar s = d.createElement('script');\n\t\t\t\t\ts.async = true;\n\t\t\t\t\ts.src = u + '?' + (Date.now() / 180_000 | 0);\n\t\t\t\t\tvar h = d.getElementsByTagName('script')[0];\n\t\t\t\t\th.parentNode.insertBefore(s, h);\n\t\t\t\t})(window, document, `https://bitrix24.team/upload/crm/form/loader_${params.id}_${params.sec}.js`);\n\t\t\t},\n\t\t},\n\t};\n\n\tconst popup: PopupInstance = new Popup(popupOptions);\n\n\tpopup.show();\n}\n","import { Runtime, Reflection } from 'main.core';\n\nexport const showHelper = async (): Promise<void> => {\n\tawait Runtime.loadExtension('helper');\n\tconst Helper = Reflection.getClass('BX.Helper');\n\n\tHelper.show('redirect=detail&code=20267044');\n};\n","import { showPartnerConnectForm, type ShowPartnerFormParams } from './show-partner-connect-form';\nimport { showPartnerOrderForm, type ShowPartnerOrderFormParams } from './show-partner-order-form';\nimport { showHelper } from './show-helper';\n\nexport class PartnerForm\n{\n\tstatic async showConnectForm(params: ShowPartnerFormParams): void\n\t{\n\t\treturn showPartnerConnectForm(params);\n\t}\n\n\tstatic showIntegrationOrderForm(params: ShowPartnerOrderFormParams): void\n\t{\n\t\treturn showPartnerOrderForm(params);\n\t}\n\n\tstatic async showHelper(): void\n\t{\n\t\treturn showHelper();\n\t}\n}\n","import { Loc, Reflection } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class ChatMenu\n{\n\tconstructor()\n\t{\n\t\tEventEmitter.subscribe('IM.Layout:onLayoutChange', this.#handleImLayoutChange.bind(this));\n\t\tEventEmitter.subscribe('IM.Counters:onUpdate', this.#handleCounterUpdate.bind(this));\n\t\tEventEmitter.subscribe('BX.Intranet.Bitrix24.ChatMenu:onSelect', this.#handleChatMenuSelect.bind(this));\n\t}\n\n\tgetChatMenu(): typeof(BX.Main.interfaceButtons) | null\n\t{\n\t\t/**\n\t\t *\n\t\t * @type {BX.Main.interfaceButtonsManager}\n\t\t */\n\t\tconst menuManager = Reflection.getClass('BX.Main.interfaceButtonsManager');\n\t\tif (menuManager)\n\t\t{\n\t\t\treturn menuManager.getById('chat-menu') || null;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetCollaborationMenu(): typeof(BX.Main.interfaceButtons) | null\n\t{\n\t\t/**\n\t\t *\n\t\t * @type {BX.Main.interfaceButtonsManager}\n\t\t */\n\t\tconst menuManager = Reflection.getClass('BX.Main.interfaceButtonsManager');\n\t\tif (menuManager)\n\t\t{\n\t\t\treturn menuManager.getById('top_menu_id_collaboration') || null;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#handleChatMenuSelect(event: BaseEvent): void\n\t{\n\t\tconst data = event.getData();\n\t\tconst { id, entityId } = data;\n\t\tlet target = data.event?.target;\n\t\tif (target)\n\t\t{\n\t\t\ttarget = target.closest('.main-buttons-item-link, .menu-popup-item');\n\t\t}\n\n\t\tconst Public = Reflection.getClass('BX.Messenger.Public');\n\t\tPublic?.openNavigationItem({ id, entityId, target });\n\t}\n\n\t#handleImLayoutChange(event: BaseEvent): void\n\t{\n\t\tconst data = event.getData();\n\n\t\tlet fromItemId = data.from.name.toLowerCase();\n\t\tif (fromItemId === 'market' && data.from.entityId)\n\t\t{\n\t\t\tfromItemId = `${fromItemId}_${data.from.entityId}`;\n\t\t}\n\n\t\tlet toItemId = data.to.name.toLowerCase();\n\t\tif (toItemId === 'market' && data.to.entityId)\n\t\t{\n\t\t\ttoItemId = `${toItemId}_${data.to.entityId}`;\n\t\t}\n\n\t\tconst chatMenu = this.getChatMenu();\n\t\tif (chatMenu !== null)\n\t\t{\n\t\t\tchatMenu.unsetActive(fromItemId);\n\t\t\tchatMenu.setActive(toItemId);\n\t\t\tchatMenu.reset();\n\t\t}\n\n\t\tconst collaborationMenu = this.getCollaborationMenu();\n\t\tconst siteDir = Loc.getMessage('SITE_DIR') || '/';\n\t\tconst isMessengerEmbedded = window.location.pathname.toString().startsWith(`${siteDir}online/`);\n\t\tif (collaborationMenu !== null)\n\t\t{\n\t\t\tif (isMessengerEmbedded)\n\t\t\t{\n\t\t\t\tcollaborationMenu.unsetActive(fromItemId);\n\t\t\t\tcollaborationMenu.setActive(toItemId);\n\t\t\t}\n\n\t\t\tcollaborationMenu.reset();\n\t\t}\n\t}\n\n\t#handleCounterUpdate(event: BaseEvent): void\n\t{\n\t\tconst counters: Object<string, number> = event.getData();\n\t\tconst menus = [this.getChatMenu(), this.getCollaborationMenu()];\n\t\tfor (const menu of menus)\n\t\t{\n\t\t\tif (menu === null)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (const [counterId, counterValue] of Object.entries(counters))\n\t\t\t{\n\t\t\t\tmenu.updateCounter(counterId, counterValue);\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\n\nexport function getBackUrl(): string\n{\n\tconst backUrl = window.location.pathname;\n\tconst query = getQueryString(['logout', 'login', 'back_url_pub', 'user_lang']);\n\n\treturn backUrl + (query.length > 0 ? `?${query}` : '');\n}\n\nfunction getQueryString(ignoredParams): string\n{\n\tconst query = window.location.search.slice(1);\n\n\tif (!Type.isStringFilled(query))\n\t{\n\t\treturn '';\n\t}\n\n\tconst vars = query.split('&');\n\tconst checkedIgnoredParams = Type.isArray(ignoredParams) ? ignoredParams : [];\n\n\tlet result = '';\n\tfor (const variable of vars)\n\t{\n\t\tconst pair = variable.split('=');\n\t\tconst equal = variable.indexOf('=');\n\t\tconst key = pair[0];\n\t\tconst value = Type.isStringFilled(pair[1]) ? pair[1] : false;\n\t\tif (!checkedIgnoredParams.includes(key))\n\t\t{\n\t\t\tif (result !== '')\n\t\t\t{\n\t\t\t\tresult += '&';\n\t\t\t}\n\t\t\tresult += key + (equal === -1 ? '' : '=') + (value === false ? '' : value);\n\t\t}\n\t}\n\n\treturn result;\n}\n","import { Type, Tag, Dom, ajax as Ajax } from 'main.core';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\nimport { MemoryCache, type BaseCache } from 'main.core.cache';\nimport { PULL } from 'pull.client';\nimport { getBackUrl } from './helpers';\n\nexport class Composite\n{\n\t#refs: BaseCache<HTMLElement> = new MemoryCache();\n\n\tconstructor()\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.#bindEvents();\n\t\t}\n\t}\n\n\tisEnabled(): boolean\n\t{\n\t\treturn !Type.isUndefined(window.frameRequestStart);\n\t}\n\n\tisReady(): boolean\n\t{\n\t\treturn window.BX?.frameCache?.frameDataInserted === true || !Type.isUndefined(window.frameRequestFail);\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tconst page = window.location.pathname;\n\t\tif (page === '/stream/' || page === '/stream/index.php' || page === '/index.php')\n\t\t{\n\t\t\tthis.#showLoader('stream');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.#showLoader();\n\t\t\t}, 500);\n\t\t}\n\t}\n\n\t#showLoader(page: string = null): void\n\t{\n\t\tif (this.isReady())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst skeleton = this.#getPageSkeleton(page);\n\t\tconst container = this.getStubContainer();\n\t\tconst stub = skeleton ?? this.getLoaderContainer();\n\t\tif (!container || stub.parentNode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.append(stub, container);\n\t}\n\n\t#getPageSkeleton(page: string): HTMLElement | null\n\t{\n\t\tconst map = {\n\t\t\tstream: () => this.getLiveFeedSkeleton(),\n\t\t};\n\n\t\tif (map[page])\n\t\t{\n\t\t\treturn map[page]();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetStubContainer(): HTMLElement | null\n\t{\n\t\treturn document.querySelector('#page-area');\n\t}\n\n\tgetLoaderContainer(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('loader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"composite-skeleton-container\">\n\t\t\t\t\t<div class=\"composite-loader-container\">\n\t\t\t\t\t\t<svg class=\"composite-loader-circular\" viewBox=\"25 25 50 50\">\n\t\t\t\t\t\t\t<circle class=\"composite-loader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\" />\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#bindEvents(): void\n\t{\n\t\tEventEmitter.subscribe('onFrameDataRequestFail', () => {\n\t\t\tconsole.error('Composite ajax request failed');\n\t\t\ttop.location = `/auth/?backurl=${encodeURIComponent(getBackUrl())}`;\n\t\t});\n\n\t\tEventEmitter.subscribe('onAjaxFailure', (event: BaseEvent) => {\n\t\t\tconst [reason, status] = event.getCompatData();\n\t\t\tconst redirectUrl = `/auth/?backurl=${getBackUrl()}`;\n\t\t\tif (this.isEnabled() && (reason === 'auth' || (reason === 'status' && status === 401)))\n\t\t\t{\n\t\t\t\tconsole.error('Auth ajax request failed', reason, status);\n\t\t\t\ttop.location = redirectUrl;\n\t\t\t}\n\t\t});\n\n\t\tif (PULL)\n\t\t{\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'main',\n\t\t\t\tcommand: 'composite-cache-up',\n\t\t\t\tcallback: () => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tconst value = BX.localStorage.get('ajax-composite-cache-up-lock');\n\t\t\t\t\t\tif (!value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.localStorage.set('ajax-composite-cache-up-lock', 'EXECUTE', 2);\n\t\t\t\t\t\t\tAjax({\n\t\t\t\t\t\t\t\turl: '/blank.php',\n\t\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\t\tprocessData: false,\n\t\t\t\t\t\t\t\tskipBxHeader: true,\n\t\t\t\t\t\t\t\temulateOnload: false,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, Math.floor(Math.random() * 500));\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tgetLiveFeedSkeleton(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('feed-skeleton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"page top-menu-mode start-page no-background no-all-paddings no-page-header\">\n\t\t\t\t\t<div class=\"page__workarea\">\n\t\t\t\t\t\t<div class=\"page__sidebar\">${this.getLiveFeedSidebar()}</div>\n\t\t\t\t\t\t<main class=\"page__workarea-content\">${this.getLiveFeedWorkArea()}</main>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLiveFeedSidebar(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('feed-sidebar', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__sidebar skeleton__intranet-ustat\">\n\t\t\t\t\t<div class=\"skeleton__graph-circle\"></div>\n\t\t\t\t\t<div class=\"skeleton__graph-right\">\n\t\t\t\t\t\t<div class=\"skeleton__graph-right_top\">\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle --first\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_top-circle\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__graph-right_bottom\">\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_bottom-line\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__graph-right_bottom-line\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__sidebar\">\n\t\t\t\t\t<div class=\"skeleton__sidebar-header\">\n\t\t\t\t\t\t<div class=\"skeleton__sidebar-header_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__sidebar-header_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__tasks-row\">\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_short-line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__tasks-row\">\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_short-line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__tasks-row\">\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_short-line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__tasks-row\">\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_short-line\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__tasks-row_circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__sidebar\">\n\t\t\t\t\t<div class=\"skeleton__sidebar-header\">\n\t\t\t\t\t\t<div class=\"skeleton__sidebar-header_line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__sidebar\">\n\t\t\t\t\t<div class=\"skeleton__sidebar-header\">\n\t\t\t\t\t\t<div class=\"skeleton__sidebar-header_line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__birthdays-row\">\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-circle\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__birthdays-info\">\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__birthdays-date\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLiveFeedWorkArea(): HTMLElement\n\t{\n\t\treturn this.#refs.remember('feed-work-area', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__feed-wrap\">\n\t\t\t\t\t<div class=\"skeleton__feed-wrap_header\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --long\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --one\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --two\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --one\"></div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-link --two\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-content\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-wrap_header-text\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__title-block\">\n\t\t\t\t\t<div class=\"skeleton__title-block_text\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__feed-item\">\n\t\t\t\t\t<div class=\"skeleton__feed-item_user-icon\"></div>\n\t\t\t\t\t<div class=\"skeleton__feed-item_content\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_main\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_date\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --short\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --one\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --two\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --three\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --four\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_like\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-name\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-block\">\n\t\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-text\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__feed-item\">\n\t\t\t\t\t<div class=\"skeleton__feed-item_user-icon\"></div>\n\t\t\t\t\t<div class=\"skeleton__feed-item_content\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_main\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_date\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --short\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --one\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --two\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --three\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --four\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_like\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-name\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-block\">\n\t\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-text\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"skeleton__white-bg-element skeleton__feed-item\">\n\t\t\t\t\t<div class=\"skeleton__feed-item_user-icon\"></div>\n\t\t\t\t\t<div class=\"skeleton__feed-item_content\">\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_main\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --name\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_date\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_text --short\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --one\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --two\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --three\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_nav-line --four\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_like\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_like-name\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment\">\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-icon\"></div>\n\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-block\">\n\t\t\t\t\t\t\t\t<div class=\"skeleton__feed-item_comment-text\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Event, Dom } from 'main.core';\nimport type { GoTopButton } from './go-top-button';\n\nexport type RightBarOptions = {\n\tgoTopButton: GoTopButton;\n};\n\nexport class RightBar\n{\n\t#isTransparentMode: boolean = false;\n\t#isScrollMode: boolean = false;\n\t#scrollModeThreshold: number = window.innerHeight;\n\t#goTopButton: GoTopButton;\n\n\tconstructor(options: RightBarOptions)\n\t{\n\t\tconst redraw = this.redraw.bind(this);\n\t\tEvent.bind(window, 'scroll', redraw, { passive: true });\n\t\tEvent.bind(window, 'resize', redraw);\n\t\tthis.#scrollModeThreshold = window.innerHeight;\n\t\tthis.#goTopButton = options.goTopButton;\n\n\t\tthis.#goTopButton.subscribe('show', () => {\n\t\t\tDom.addClass(this.getContainer(), '--show-scroll-btn');\n\t\t});\n\n\t\tthis.#goTopButton.subscribe('hide', () => {\n\t\t\tDom.removeClass(this.getContainer(), '--show-scroll-btn');\n\t\t});\n\n\t\tEvent.ready(() => {\n\t\t\tthis.redraw();\n\t\t});\n\t}\n\n\tredraw(): void\n\t{\n\t\tconst rightBar = this.getContainer();\n\n\t\tthis.#scrollModeThreshold = window.innerHeight;\n\n\t\tif (window.pageYOffset > this.#scrollModeThreshold)\n\t\t{\n\t\t\tif (!this.#isScrollMode)\n\t\t\t{\n\t\t\t\tDom.addClass(rightBar, '--scroll-mode');\n\t\t\t\tthis.#isScrollMode = true;\n\t\t\t}\n\t\t}\n\t\telse if (this.#isScrollMode)\n\t\t{\n\t\t\tDom.removeClass(rightBar, '--scroll-mode');\n\t\t\tthis.#isScrollMode = false;\n\t\t}\n\n\t\tif (!rightBar || rightBar.dataset.lockRedraw === 'true')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollWidth = document.documentElement.scrollWidth - document.documentElement.clientWidth;\n\t\tif (scrollWidth > 0)\n\t\t{\n\t\t\tif (!this.#isTransparentMode)\n\t\t\t{\n\t\t\t\tDom.addClass(rightBar, '--transparent');\n\t\t\t\tthis.#isTransparentMode = true;\n\t\t\t}\n\t\t}\n\t\telse if (this.#isTransparentMode)\n\t\t{\n\t\t\tDom.removeClass(rightBar, '--transparent');\n\t\t\tthis.#isTransparentMode = false;\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn document.getElementById('right-bar');\n\t}\n}\n","export class Header\n{\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn document.getElementById('header');\n\t}\n}\n","import { Dom } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport class Footer\n{\n\tconstructor()\n\t{\n\t\tEventEmitter.subscribe('Kanban.Grid:onFixedModeStart', () => {\n\t\t\tthis.hide();\n\t\t});\n\t}\n\n\tshow(): void\n\t{\n\t\tDom.removeClass(this.getContainer(), 'hidden');\n\t}\n\n\thide(): void\n\t{\n\t\tDom.addClass(this.getContainer(), 'hidden');\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn document.getElementById('air-footer');\n\t}\n}\n","import { Dom, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { ButtonIcon, ButtonManager } from 'ui.buttons';\n\nexport class GoTopButton extends EventEmitter\n{\n\t#lastScrollOffset = 0;\n\t#isReversed = false;\n\t#button: Button;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.setEventNamespace('GoTopButton');\n\t\tthis.#bindEvents();\n\t}\n\n\tisShown(): boolean\n\t{\n\t\treturn Dom.hasClass(this.#getButtonWrapper(), '--show');\n\t}\n\n\t#show(): void\n\t{\n\t\tthis.emit('show');\n\t\tDom.addClass(this.#getButtonWrapper(), '--show');\n\t}\n\n\t#hide(): void\n\t{\n\t\tthis.emit('hide');\n\t\tDom.removeClass(this.#getButtonWrapper(), '--show');\n\t}\n\n\t#getButtonWrapper(): HTMLElement\n\t{\n\t\treturn document.getElementById('goTopButtonWrapper');\n\t}\n\n\t#bindEvents(): void\n\t{\n\t\tEvent.ready(() => {\n\t\t\tthis.#handleScroll();\n\n\t\t\tEvent.bind(window, 'scroll', () => {\n\t\t\t\tthis.#handleScroll();\n\t\t\t});\n\n\t\t\tEvent.bind(this.#getButtonWrapper(), 'click', () => {\n\t\t\t\tthis.#handleButtonClick();\n\t\t\t});\n\t\t});\n\t}\n\n\t#handleScroll(): boolean\n\t{\n\t\tif (window.pageYOffset > document.documentElement.clientHeight)\n\t\t{\n\t\t\tthis.#show();\n\n\t\t\tif (this.#isReversed)\n\t\t\t{\n\t\t\t\tthis.#setReversed(false);\n\t\t\t\tthis.#lastScrollOffset = 0;\n\t\t\t}\n\t\t}\n\t\telse if (this.#isReversed === false)\n\t\t{\n\t\t\tthis.#hide();\n\t\t}\n\t}\n\n\t#handleButtonClick(): void\n\t{\n\t\tif (this.#isReversed)\n\t\t{\n\t\t\tthis.#setReversed(false);\n\n\t\t\twindow.scrollTo({\n\t\t\t\ttop: this.#lastScrollOffset,\n\t\t\t\tbehavior: 'instant',\n\t\t\t});\n\n\t\t\tthis.#lastScrollOffset = 0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#setReversed(true);\n\t\t\tthis.#lastScrollOffset = window.pageYOffset;\n\n\t\t\twindow.scrollTo({\n\t\t\t\ttop: 0,\n\t\t\t\tbehavior: 'instant',\n\t\t\t});\n\t\t}\n\t}\n\n\t#setReversed(flag: boolean = true): void\n\t{\n\t\tthis.#isReversed = flag;\n\n\t\tif (this.#isReversed)\n\t\t{\n\t\t\tthis.#getButton().setIcon(ButtonIcon.ANGLE_DOWN);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#getButton().setIcon(ButtonIcon.ANGLE_UP);\n\t\t}\n\t}\n\n\t#getButton(): Button\n\t{\n\t\treturn this.#button || ButtonManager.createFromNode(document.getElementById('goTopButton'));\n\t}\n}\n","import { Reflection } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class CollaborationMenu\n{\n\tconstructor()\n\t{\n\t\tEventEmitter.subscribe('onImUpdateCounterMessage', this.#handleCounterUpdate.bind(this));\n\t\tEventEmitter.subscribe('onCounterDecrement', this.#handleLiveFeedCounterDecrement.bind(this));\n\t}\n\n\tgetMenu(): typeof(BX.Main.interfaceButtons) | null\n\t{\n\t\t/**\n\t\t *\n\t\t * @type {BX.Main.interfaceButtonsManager}\n\t\t */\n\t\tconst menuManager = Reflection.getClass('BX.Main.interfaceButtonsManager');\n\t\tif (menuManager)\n\t\t{\n\t\t\treturn menuManager.getById('top_menu_id_collaboration');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#handleCounterUpdate(event: BaseEvent): void\n\t{\n\t\tconst menu = this.getMenu();\n\t\tconst [counter] = event.getCompatData();\n\t\tmenu?.updateCounter('im-message', counter);\n\t}\n\n\t#handleLiveFeedCounterDecrement(event: BaseEvent): void\n\t{\n\t\tconst [decrement] = event.getCompatData();\n\t\tconst menu = this.getMenu();\n\t\tif (menu)\n\t\t{\n\t\t\tconst item = menu.getItemById('menu_live_feed');\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tconst itemData = menu.getItemData(item);\n\t\t\t\tconst { COUNTER, COUNTER_ID } = itemData;\n\n\t\t\t\tmenu?.updateCounter(COUNTER_ID, Math.max(0, COUNTER - decrement));\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Type, Reflection, Runtime, Dom, Browser } from 'main.core';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\nimport { ChatMenu } from './chat-menu';\nimport { Composite } from './composite';\nimport { RightBar } from './right-bar';\nimport { Header } from './header/header';\nimport { Footer } from './footer';\nimport { GoTopButton } from './go-top-button';\nimport { CollaborationMenu } from './collaboration-menu';\n\nexport class SiteTemplate\n{\n\t#rightBar: RightBar = null;\n\t#header: Header = null;\n\t#footer: Footer = null;\n\t#composite: Composite = null;\n\t#chatMenu: ChatMenu = null;\n\t#goTopButton: GoTopButton = null;\n\t#collaborationMenu: CollaborationMenu = null;\n\n\tconstructor()\n\t{\n\t\tthis.#preventFromIframe();\n\n\t\tthis.#patchPopupMenu();\n\t\tthis.#patchRestAPI();\n\t\tthis.#patchJSClock();\n\n\t\tthis.#goTopButton = new GoTopButton();\n\t\tthis.#rightBar = new RightBar({\n\t\t\tgoTopButton: this.#goTopButton,\n\t\t});\n\t\tthis.#header = new Header();\n\t\tthis.#footer = new Footer();\n\t\tthis.#composite = new Composite();\n\t\tthis.#chatMenu = new ChatMenu();\n\t\tthis.#collaborationMenu = new CollaborationMenu();\n\n\t\tthis.#applyUserAgentRules();\n\t}\n\n\tgetRightBar(): RightBar\n\t{\n\t\treturn this.#rightBar;\n\t}\n\n\tgetHeader(): Header\n\t{\n\t\treturn this.#header;\n\t}\n\n\tgetFooter(): Footer\n\t{\n\t\treturn this.#footer;\n\t}\n\n\tgetComposite(): Composite\n\t{\n\t\treturn this.#composite;\n\t}\n\n\tgetChatMenu(): ChatMenu\n\t{\n\t\treturn this.#chatMenu;\n\t}\n\n\tgetCollaborationMenu(): CollaborationMenu\n\t{\n\t\treturn this.#collaborationMenu;\n\t}\n\n\t#patchPopupMenu(): void\n\t{\n\t\tEventEmitter.subscribe('BX.Main.Menu:onInit', (event: BaseEvent) => {\n\t\t\tconst { params } = event.getData();\n\t\t\tif (params && Type.isNumber(params.maxWidth))\n\t\t\t{\n\t\t\t\t// We increased menu-item's font-size that's why we increase max-width\n\t\t\t\tparams.maxWidth += 10;\n\t\t\t}\n\t\t});\n\t}\n\n\t#patchJSClock(): void\n\t{\n\t\tEventEmitter.subscribe('onJCClockInit', (config) => {\n\t\t\twindow.JCClock.setOptions({\n\t\t\t\tcenterXInline: 83,\n\t\t\t\tcenterX: 83,\n\t\t\t\tcenterYInline: 67,\n\t\t\t\tcenterY: 79,\n\t\t\t\tminuteLength: 31,\n\t\t\t\thourLength: 26,\n\t\t\t\tpopupHeight: 229,\n\t\t\t\tinaccuracy: 15,\n\t\t\t\tcancelCheckClick: true,\n\t\t\t});\n\t\t});\n\t}\n\n\t#preventFromIframe(): void\n\t{\n\t\tconst iframeMode = window !== window.top;\n\t\tif (iframeMode)\n\t\t{\n\t\t\twindow.top.location = window.location.href;\n\t\t}\n\t}\n\n\t#applyUserAgentRules(): void\n\t{\n\t\tif (!Browser.isMobile() && document.referrer !== '' && document.referrer.startsWith(location.origin) === false)\n\t\t{\n\t\t\tRuntime.loadExtension('intranet.recognize-links');\n\t\t}\n\t}\n\n\t#patchRestAPI(): void\n\t{\n\t\tconst AppLayout = Reflection.getClass('BX.rest.AppLayout');\n\t\tif (!AppLayout)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst placementInterface = AppLayout.initializePlacement('DEFAULT');\n\t\tplacementInterface.prototype.showHelper = async function(params, cb)\n\t\t{\n\t\t\tlet query = '';\n\t\t\tif (Type.isNumber(params))\n\t\t\t{\n\t\t\t\tquery = `redirect=detail&code=${params}`;\n\t\t\t}\n\t\t\telse if (Type.isStringFilled(params))\n\t\t\t{\n\t\t\t\tquery = params;\n\t\t\t}\n\t\t\telse if (Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tfor (const param of Object.keys(params))\n\t\t\t\t{\n\t\t\t\t\tif (query.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tquery += '&';\n\t\t\t\t\t}\n\n\t\t\t\t\tquery += `${param}=${params[param]}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (query.length > 0)\n\t\t\t{\n\t\t\t\tawait Runtime.loadExtension('helper');\n\t\t\t\tconst Helper = Reflection.getClass('BX.Helper');\n\t\t\t\tHelper.show(query);\n\t\t\t}\n\t\t};\n\t}\n}\n","import { Event, Runtime, Dom, Type, Reflection, type JsonObject } from 'main.core';\n\nexport class SearchTitle\n{\n\t#searchOptions: JsonObject = {};\n\t#extensionLoaded: boolean = false;\n\t#container: HTMLElement = null;\n\t#button: HTMLElement = null;\n\t#input: HTMLInputElement = null;\n\t#searchTitleInstance = null;\n\n\tconstructor(options)\n\t{\n\t\tthis.#container = document.getElementById(options.containerId);\n\t\tthis.#button = document.getElementById(options.buttonId);\n\t\tthis.#input = document.getElementById(options.inputId);\n\n\t\tthis.#searchOptions = options.searchOptions;\n\n\t\tEvent.bind(this.#button, 'click', this.#handleButtonClick.bind(this));\n\t\tEvent.bind(this.#input, 'focusout', this.#handleInputFocusOut.bind(this));\n\t}\n\n\topen(): void\n\t{\n\t\tDom.addClass(this.#container, '--active');\n\n\t\tthis.#input.disabled = false;\n\n\t\tsetTimeout(() => {\n\t\t\tthis.#input.focus();\n\t\t}, 200);\n\t}\n\n\tclose(): void\n\t{\n\t\tDom.removeClass(this.#container, '--active');\n\t\tthis.#input.disabled = true;\n\n\t\tif (this.#searchTitleInstance !== null)\n\t\t{\n\t\t\tthis.#searchTitleInstance.clearSearch();\n\t\t\tthis.#searchTitleInstance.closeResult();\n\t\t}\n\t}\n\n\t#handleButtonClick(): void\n\t{\n\t\tif (Dom.hasClass(this.#container, '--active'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.open();\n\t\t}\n\n\t\tif (this.#extensionLoaded)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#extensionLoaded = true;\n\t\tRuntime.loadExtension('intranet.search_title').then(() => {\n\t\t\tconst SearchTitleClass = Reflection.getClass('BX.Intranet.SearchTitle');\n\t\t\tthis.#searchTitleInstance = new SearchTitleClass(this.#searchOptions);\n\t\t}).catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n\t}\n\n\t#handleInputFocusOut(event): void\n\t{\n\t\tif (!Type.isStringFilled(this.#input.value) && event.relatedTarget !== this.#button)\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n}\n","import { Event, Runtime, Type, ajax, Dom } from 'main.core';\nimport { BaseCache, MemoryCache } from 'main.core.cache';\nimport { EventEmitter } from 'main.core.events';\nimport { Counter, CounterStyle } from 'ui.cnt';\nimport { WidgetLoader } from 'intranet.widget-loader';\nimport { AvatarWidget } from 'intranet.avatar-widget';\nimport { PULL } from 'pull.client';\nimport { WorkTimeStateIcon } from 'timeman.work-time-state-icon';\n\ntype AvatarButtonOptions = {\n\tuserId: number,\n\tskeleton: Object,\n\tsignDocumentsCounter: number,\n\tsignDocumentsPullEventName: string,\n\tworkTimeAvailable: boolean,\n\tworkTimeState: string,\n\tworkTimeAction: string,\n}\n\nexport class AvatarButton\n{\n\tstatic #avatarWrapper: HTMLElement;\n\tstatic #cache: BaseCache<any> = new MemoryCache();\n\tstatic #options: AvatarButtonOptions;\n\n\tstatic init(options: AvatarButtonOptions): void\n\t{\n\t\tthis.#options = options;\n\t\tthis.#avatarWrapper = document.querySelector('[data-id=\"bx-avatar-widget\"]');\n\t\tthis.#setEventHandlerForChangeAvatar();\n\n\t\tif (this.#options.signDocumentsCounter > 0)\n\t\t{\n\t\t\tthis.#showCounter();\n\t\t\tthis.#setEventHandlerForUpdateCounter();\n\t\t}\n\n\t\tif (this.#options.workTimeAvailable)\n\t\t{\n\t\t\tthis.#showWorkTimeState();\n\t\t}\n\n\t\tEvent.bind(this.#avatarWrapper, 'click', () => {\n\t\t\tEvent.unbindAll(this.#avatarWrapper);\n\t\t\tthis.#getWidgetLoader().getPopup().setFixed(true);\n\t\t\tthis.#getWidgetLoader()\n\t\t\t\t.createSkeletonFromConfig(options.skeleton)\n\t\t\t\t.show();\n\t\t\tthis.#setHiddenAvatar();\n\t\t\tthis.#getWidgetLoader().getPopup().subscribe('onClose', () => {\n\t\t\t\tthis.#setVisibleAvatar();\n\t\t\t});\n\t\t\tthis.#getWidgetLoader().getPopup().subscribe('onShow', () => {\n\t\t\t\tthis.#setHiddenAvatar();\n\t\t\t});\n\t\t\tRuntime.loadExtension(['intranet.avatar-widget']).then(() => {\n\t\t\t\tthis.#showWidget();\n\t\t\t}).catch(() => {});\n\t\t});\n\t}\n\n\tstatic #setHiddenAvatar(): void\n\t{\n\t\tDom.style(this.#avatarWrapper, 'opacity', '0');\n\t}\n\n\tstatic #setVisibleAvatar(): void\n\t{\n\t\tDom.style(this.#avatarWrapper, 'opacity', '1');\n\t}\n\n\tstatic #showWidget(): void\n\t{\n\t\tthis.#getContent().then((response) => {\n\t\t\tthis.#getWidgetLoader().clearBeforeInsertContent();\n\t\t\tAvatarWidget.getInstance().setOptions({\n\t\t\t\tbuttonWrapper: this.#avatarWrapper,\n\t\t\t\tloader: this.#getWidgetLoader().getPopup(),\n\t\t\t\tdata: response.data,\n\t\t\t}).show();\n\t\t\tEvent.bind(this.#avatarWrapper, 'click', () => {\n\t\t\t\tAvatarWidget.getInstance().show();\n\t\t\t});\n\t\t}).catch(() => {});\n\t}\n\n\tstatic #getWidgetLoader(): WidgetLoader\n\t{\n\t\treturn this.#cache.remember('widgetLoader', () => {\n\t\t\treturn new WidgetLoader({\n\t\t\t\tid: 'bx-avatar-header-popup',\n\t\t\t\tbindElement: this.#avatarWrapper,\n\t\t\t\tclassName: 'intranet-avatar-widget-base-popup',\n\t\t\t\twidth: 450,\n\t\t\t\tuseAngle: false,\n\t\t\t\tfixed: true,\n\t\t\t\toffsetTop: -50,\n\t\t\t\toffsetLeft: -392,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getContent(): Promise\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runAction('intranet.user.widget.getContent')\n\t\t\t\t\t.then((response) => resolve(response))\n\t\t\t\t\t.catch((response) => reject(response))\n\t\t\t\t;\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #showCounter(): void\n\t{\n\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t}\n\n\tstatic #showWorkTimeState(): void\n\t{\n\t\tthis.#getWorkTimeState().renderTo(this.#getWorkTimeStateWrapper());\n\t}\n\n\tstatic #getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('counterWrapper', () => {\n\t\t\treturn this.#avatarWrapper.querySelector('.air-user-profile-avatar__counter');\n\t\t});\n\t}\n\n\tstatic #getWorkTimeStateWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('workTimeStateWrapper', () => {\n\t\t\treturn this.#avatarWrapper.querySelector('.air-user-profile-avatar__work-time-state');\n\t\t});\n\t}\n\n\tstatic #getCounter(): Counter\n\t{\n\t\treturn this.#cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t\tsize: Counter.Size.MEDIUM,\n\t\t\t\tvalue: this.#options.signDocumentsCounter,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: CounterStyle.FILLED_ALERT,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getWorkTimeState(): WorkTimeStateIcon\n\t{\n\t\treturn this.#cache.remember('workTimeState', () => {\n\t\t\treturn new WorkTimeStateIcon({\n\t\t\t\tstate: this.#options.workTimeState,\n\t\t\t\taction: this.#options.workTimeAction,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #setEventHandlerForUpdateCounter(): void\n\t{\n\t\tPULL.subscribe({\n\t\t\tmoduleId: 'sign',\n\t\t\tcommand: this.#options.signDocumentsPullEventName,\n\t\t\tcallback: (params) => {\n\t\t\t\tif (!Type.isNumber(params?.needActionCount))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (params?.needActionCount > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.#getCounter().update(params.needActionCount);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.#getCounter().destroy();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic #setEventHandlerForChangeAvatar(): void\n\t{\n\t\tconst avatar = this.#avatarWrapper.querySelector('i');\n\n\t\tEventEmitter.subscribe(\n\t\t\t'BX.Intranet.UserProfile:Avatar:changed',\n\t\t\t(event) => {\n\t\t\t\tconst data = event.getData()[0];\n\t\t\t\tconst url = data && data.url ? data.url : '';\n\t\t\t\tconst eventUserId = data && data.userId ? data.userId : 0;\n\n\t\t\t\tif (this.#options.userId === eventUserId && avatar)\n\t\t\t\t{\n\t\t\t\t\tavatar.style = Type.isStringFilled(url)\n\t\t\t\t\t\t? `background-size: cover; background-image: url('${encodeURI(url)}')`\n\t\t\t\t\t\t: ''\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n}\n","import { ajax, Event, Runtime } from 'main.core';\nimport { BaseCache, MemoryCache } from 'main.core.cache';\nimport { LicenseWidget as Bitrix24LicenseWidget } from 'bitrix24.license-widget';\nimport { LicenseWidget as IntranetLicenseWidget } from 'intranet.license-widget';\nimport { WidgetLoader } from 'intranet.widget-loader';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport {Counter, CounterColor, CounterStyle} from 'ui.cnt';\nimport { PULL } from 'pull.client';\n\ntype LicenseButtonOptions = {\n\tordersAwaitingPayment: number,\n\tskeleton: Object,\n\tisSidePanelDemoLicense: boolean,\n\tisAdmin: boolean,\n\tisCloud: boolean,\n\tinfrastructureForm: {\n\t\tid: string,\n\t\tsecCode: string,\n\t},\n};\n\nexport class LicenseButton\n{\n\tstatic #options: LicenseButtonOptions;\n\tstatic #buttonWrapper: HTMLElement;\n\tstatic #cache: BaseCache<any> = new MemoryCache();\n\n\tstatic init(options: LicenseButtonOptions): void\n\t{\n\t\tthis.#options = options;\n\t\tthis.#buttonWrapper = document.querySelector('[data-id=\"licenseWidgetWrapper\"]');\n\t\tthis.#setEventHandlers();\n\n\t\tif (this.#options.isCloud && this.#options.ordersAwaitingPayment > 0)\n\t\t{\n\t\t\tthis.#setCounterValue(this.#options.ordersAwaitingPayment);\n\t\t}\n\n\t\tEvent.bind(this.#buttonWrapper, 'click', () => {\n\t\t\tEvent.unbindAll(this.#buttonWrapper);\n\t\t\tthis.#getWidgetLoader()\n\t\t\t\t.createSkeletonFromConfig(options.skeleton)\n\t\t\t\t.show();\n\t\t\tRuntime.loadExtension([this.#getExtensionWidgetName()]).then(() => {\n\t\t\t\tthis.#showWidget();\n\t\t\t}).catch(() => {});\n\t\t});\n\t}\n\n\tstatic #getExtensionWidgetName(): string\n\t{\n\t\tif (this.#options.isCloud)\n\t\t{\n\t\t\treturn 'bitrix24.license-widget';\n\t\t}\n\n\t\treturn 'intranet.license-widget';\n\t}\n\n\tstatic #showWidget(): void\n\t{\n\t\tthis.#getContent().then((response) => {\n\t\t\tthis.#getWidgetLoader().clearBeforeInsertContent();\n\t\t\tlet licenseData = null;\n\n\t\t\tif (this.#options.isCloud)\n\t\t\t{\n\t\t\t\tlicenseData = response.data;\n\t\t\t\tlicenseData.loader = this.#getWidgetLoader().getPopup();\n\t\t\t\tlicenseData.wrapper = this.#buttonWrapper;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlicenseData = {\n\t\t\t\t\tloader: this.#getWidgetLoader().getPopup(),\n\t\t\t\t\tbuttonWrapper: this.#buttonWrapper,\n\t\t\t\t\tdata: response.data,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.#getWidget().setOptions(licenseData).show();\n\t\t\tEvent.bind(this.#buttonWrapper, 'click', () => {\n\t\t\t\tthis.#getWidget().show();\n\t\t\t});\n\t\t}).catch(() => {});\n\t}\n\n\tstatic #getWidget(): IntranetLicenseWidget | Bitrix24LicenseWidget\n\t{\n\t\treturn this.#cache.remember('widget', () => {\n\t\t\tif (this.#options.isCloud)\n\t\t\t{\n\t\t\t\treturn Bitrix24LicenseWidget.getInstance();\n\t\t\t}\n\n\t\t\treturn IntranetLicenseWidget.getInstance();\n\t\t});\n\t}\n\n\tstatic #getWidgetLoader(): WidgetLoader\n\t{\n\t\treturn this.#cache.remember('widgetLoader', () => {\n\t\t\treturn new WidgetLoader({\n\t\t\t\tbindElement: this.#buttonWrapper,\n\t\t\t\twidth: 374,\n\t\t\t\tid: 'bx-license-header-popup',\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getContent(): Promise\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (this.#options.isCloud)\n\t\t\t\t{\n\t\t\t\t\tajax.runComponentAction('bitrix:bitrix24.license.widget', 'getData', {\n\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((response) => resolve(response))\n\t\t\t\t\t\t.catch((response) => reject(response))\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tajax.runAction('intranet.license.widget.getContent')\n\t\t\t\t\t\t.then((response) => resolve(response))\n\t\t\t\t\t\t.catch((response) => reject(response))\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getCounter(): Counter\n\t{\n\t\treturn this.#cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tcolor: CounterColor.DANGER,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: CounterStyle.FILLED_ALERT,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('counter-wrapper', () => {\n\t\t\treturn this.#buttonWrapper.querySelector('.air-header-button__counter');\n\t\t});\n\t}\n\n\tstatic #setCounterValue(value: number): void\n\t{\n\t\tif (value < 1)\n\t\t{\n\t\t\tthis.#getCounter().destroy();\n\t\t\tthis.#cache.delete('counter');\n\t\t}\n\n\t\tif (value > 0 && this.#getCounterWrapper())\n\t\t{\n\t\t\tthis.#getCounter().update(value);\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\t}\n\n\tstatic #setEventHandlers(): void\n\t{\n\t\tif (this.#options.isCloud && this.#options.isSidePanelDemoLicense)\n\t\t{\n\t\t\tBX.SidePanel.Instance.bindAnchors({\n\t\t\t\trules: [\n\t\t\t\t\t{\n\t\t\t\t\t\tcondition: [\n\t\t\t\t\t\t\t/\\/settings\\/license_demo.php/,\n\t\t\t\t\t\t],\n\t\t\t\t\t\thandler(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tFeaturePromotersRegistry.getPromoter({ code: 'limit_demo' }).show();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\tif (this.#options.isCloud && this.#options.isAdmin)\n\t\t{\n\t\t\tPULL.subscribe({\n\t\t\t\tmoduleId: 'bitrix24',\n\t\t\t\tcommand: 'updateCountOrdersAwaitingPayment',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tEventEmitter.emit('BX.Bitrix24.Orders:updateOrdersAwaitingPayment', new BaseEvent({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tcounter: Number(params.count),\n\t\t\t\t\t\t},\n\t\t\t\t\t}));\n\n\t\t\t\t\tif (params.count > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#setCounterValue(Number(params.count));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'Bitrix24InfrastructureSlider:show', this.#showInfrastructureSlider.bind(this));\n\t\t}\n\t}\n\n\tstatic #showInfrastructureSlider(): void\n\t{\n\t\tconst params = this.#options.infrastructureForm;\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\t'bx-infrastructure-slider',\n\t\t\t{\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn `<script data-b24-form=\"inline/${params.id}/${params.secCode}\" data-skip-moving=\"true\"></script>`;\n\t\t\t\t},\n\t\t\t\twidth: 664,\n\t\t\t\tloader: 'default-loader',\n\t\t\t\tcacheable: false,\n\t\t\t\tcloseByEsc: false,\n\t\t\t\tdata: { rightBoundary: 0 },\n\t\t\t\tevents: {\n\t\t\t\t\tonOpen: () => {\n\t\t\t\t\t\t(function(w, d, u) {\n\t\t\t\t\t\t\tconst s = d.createElement('script');\n\t\t\t\t\t\t\ts.async = true;\n\t\t\t\t\t\t\ts.src = `${u}?${Date.now() / 180_000 | 0}`;\n\t\t\t\t\t\t\tconst h = d.getElementsByTagName('script')[0];\n\t\t\t\t\t\t\th.parentNode.insertBefore(s, h);\n\t\t\t\t\t\t})(window, document, `https://bitrix24.team/upload/crm/form/loader_${params.id}_${params.secCode}.js`);\n\t\t\t\t\t},\n\t\t\t\t\tonOpenComplete: () => {\n\t\t\t\t\t\ttop.addEventListener('b24:form:send:success', (event) => {\n\t\t\t\t\t\t\tif (event.detail.object.identification.id === params.id)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tajax.runComponentAction('bitrix:bitrix24.license.widget', 'setOptionWaitingInfrastructure', {\n\t\t\t\t\t\t\t\t\tmode: 'class',\n\t\t\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n}\n","import { BaseCache, MemoryCache } from 'main.core.cache';\nimport { ajax, Event, Runtime, Type, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { WidgetLoader } from 'intranet.widget-loader';\nimport { InvitationWidget } from 'intranet.invitation-widget';\nimport {Counter, CounterStyle} from 'ui.cnt';\n\ntype InvitationButtonOptions = {\n\tskeleton: Object,\n\tcounterId: string,\n\tinvitationCounter: number,\n\tshouldShowStructureCounter: boolean,\n};\n\nexport class InvitationButton\n{\n\tstatic #buttonWrapper: HTMLElement;\n\tstatic #cache: BaseCache<any> = new MemoryCache();\n\tstatic #options: InvitationButtonOptions;\n\n\tstatic init(options: InvitationButtonOptions): void\n\t{\n\t\tthis.#options = options;\n\t\tthis.#buttonWrapper = document.querySelector('[data-id=\"invitationButton\"]');\n\n\t\tEvent.bind(this.#buttonWrapper, 'click', () => {\n\t\t\tEvent.unbindAll(this.#buttonWrapper);\n\t\t\tthis.#getWidgetLoader()\n\t\t\t\t.createSkeletonFromConfig(options.skeleton)\n\t\t\t\t.show();\n\t\t\tRuntime.loadExtension(['intranet.invitation-widget']).then(() => {\n\t\t\t\tthis.#showWidget();\n\t\t\t}).catch(() => {});\n\t\t});\n\n\t\tif (this.#options.invitationCounter > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\n\t\tthis.#setEventHandlers();\n\t}\n\n\tstatic #showWidget(): void\n\t{\n\t\tthis.#getContent().then((response) => {\n\t\t\tthis.#getWidgetLoader().clearBeforeInsertContent();\n\t\t\tInvitationWidget.getInstance().setOptions({\n\t\t\t\tbuttonWrapper: this.#buttonWrapper,\n\t\t\t\tloader: this.#getWidgetLoader().getPopup(),\n\t\t\t\t...response.data,\n\t\t\t}).show();\n\t\t\tEvent.bind(this.#buttonWrapper, 'click', () => {\n\t\t\t\tInvitationWidget.getInstance().show();\n\t\t\t});\n\t\t}).catch(() => {});\n\t}\n\n\tstatic #getWidgetLoader(): WidgetLoader\n\t{\n\t\treturn this.#cache.remember('widgetLoader', () => {\n\t\t\treturn new WidgetLoader({\n\t\t\t\tbindElement: this.#buttonWrapper,\n\t\t\t\twidth: 350,\n\t\t\t\tid: 'bx-invitation-header-popup',\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getContent(): Promise\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runAction('intranet.invitationwidget.getData', {\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\theaderPopup: 'Y',\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t\t.then((response) => resolve(response))\n\t\t\t\t\t.catch((response) => reject(response))\n\t\t\t\t;\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #setEventHandlers(): void\n\t{\n\t\tEventEmitter.subscribeOnce('HR.company-structure:first-popup-showed', this.#onFirstWatchNewStructure.bind(this));\n\t\tEventEmitter.subscribe('onPullEvent-main', (event) => {\n\t\t\tconst [command, params] = event.getCompatData();\n\n\t\t\tif (command === 'user_counter' && params[Loc.getMessage('SITE_ID')])\n\t\t\t{\n\t\t\t\tconst value = params[Loc.getMessage('SITE_ID')][this.#options.counterId];\n\n\t\t\t\tif (value > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.#onReceiveCounterValue(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic #onReceiveCounterValue(value): void\n\t{\n\t\tif (this.#options.shouldShowStructureCounter)\n\t\t{\n\t\t\tvalue++;\n\t\t}\n\n\t\tthis.#getCounter().update(value);\n\t\tthis.#options.invitationCounter = value;\n\n\t\tif (value > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#getCounter().destroy();\n\t\t\tthis.#cache.delete('counter');\n\t\t}\n\t}\n\n\tstatic #getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('counter-wrapper', () => {\n\t\t\treturn this.#buttonWrapper.querySelector('.invitation-widget-counter');\n\t\t});\n\t}\n\n\tstatic #getCounter(): Counter\n\t{\n\t\treturn this.#cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tvalue: this.#getCounterValue(),\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t\tuseAirDesign: true,\n\t\t\t\tstyle: CounterStyle.FILLED_ALERT,\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic #getCounterValue(): number\n\t{\n\t\tlet counterValue = Number(this.#options.invitationCounter);\n\t\tif (this.#options.shouldShowStructureCounter ?? false)\n\t\t{\n\t\t\tcounterValue++;\n\t\t}\n\n\t\treturn counterValue;\n\t}\n\n\tstatic #onFirstWatchNewStructure(): void\n\t{\n\t\tlet value = this.#getCounter().value;\n\n\t\tif (!Type.isNumber(value))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.#options.shouldShowStructureCounter)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalue--;\n\t\tthis.#options.shouldShowStructureCounter = false;\n\t\tthis.#getCounter().update(value);\n\t\tthis.#options.invitationCounter = value;\n\n\t\tif (value > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#getCounter().destroy();\n\t\t\tthis.#cache.delete('counter');\n\t\t}\n\t}\n}\n","import { Tag, Dom, Event, Runtime } from 'main.core';\nimport { type Popup as PopupInstance, type PopupOptions } from 'main.popup';\n\nimport { getBackUrl } from './helpers';\n\nimport '../css/language-switcher.css';\n\ntype LanguageList = {\n\t[languageCode: string]: LanguageListItem[];\n}\n\ntype LanguageListItem = {\n\tNAME: string;\n\tIS_BETA: boolean;\n};\n\nexport class LanguageSwitcher\n{\n\t#popup: ?PopupInstance;\n\n\tasync showLanguageListPopup(bindElement: HTMLElement, languages: LanguageList): void\n\t{\n\t\tif (!this.#popup)\n\t\t{\n\t\t\tawait this.#initPopup(bindElement, languages);\n\t\t}\n\n\t\tif (this.#popup.isShown())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#popup.show();\n\t}\n\n\tasync #initPopup(bindElement: HTMLElement, languages: LanguageList): PopupInstance\n\t{\n\t\tconst windowScrollHandler = () => {\n\t\t\tthis.hideLanguageListPopup();\n\t\t};\n\n\t\tconst { Popup } = await Runtime.loadExtension('main.popup');\n\n\t\tconst popupOptions: PopupOptions = {\n\t\t\tbindElement,\n\t\t\tautoHide: true,\n\t\t\tcloseByEcs: true,\n\t\t\tcachable: false,\n\t\t\tcontent: this.#renderPopupContent(languages),\n\t\t\tevents: {\n\t\t\t\tonPopupClose: () => {\n\t\t\t\t\tEvent.unbind(window, 'scroll', windowScrollHandler);\n\t\t\t\t\tthis.#popup.destroy();\n\t\t\t\t\tthis.#popup = null;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tthis.#popup = new Popup(popupOptions);\n\n\t\tEvent.bind(window, 'scroll', windowScrollHandler);\n\t}\n\n\thideLanguageListPopup(): void\n\t{\n\t\tthis.#popup?.close();\n\t}\n\n\tswitchPortalLanguage(languageCode: string): void\n\t{\n\t\twindow.location.href = `/auth/?user_lang=${languageCode}&backurl=${getBackUrl()}`;\n\t}\n\n\t#renderPopupContent(languages: LanguageList): HTMLElement\n\t{\n\t\tconst container = Tag.render`<div class=\"intranet__language-popup_list\"></div>`;\n\n\t\tObject.entries(languages).forEach(([languageCode: string, languageItem: LanguageListItem]) => {\n\t\t\tconst languageItemElement = Tag.render`\n\t\t\t\t<div class=\"intranet__language-popup_language-item\">\n\t\t\t\t\t<span class=\"intranet__language-popup_language-item-name\">${languageItem.NAME}</span>\n\t\t\t\t\t<span class=\"intranet__language-popup_language-beta\">${languageItem.IS_BETA ? ', beta' : ''}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(languageItemElement, 'click', () => {\n\t\t\t\tthis.switchPortalLanguage(languageCode);\n\t\t\t});\n\n\t\t\tDom.append(languageItemElement, container);\n\t\t});\n\n\t\treturn container;\n\t}\n}\n\nexport const languageSwitcher = new LanguageSwitcher();\n","import { Reflection } from 'main.core';\nimport { PartnerForm } from './js/partner-form/partner-form';\nimport { SiteTemplate } from './js/site-template';\nimport { SearchTitle } from './js/header/search-title';\nimport { AvatarButton } from './js/header/avatar-button';\nimport { LicenseButton } from './js/header/license-button';\nimport { InvitationButton } from './js/header/invitation-button';\n\nimport { languageSwitcher } from './js/language-switcher';\nimport { showPartnerConnectForm } from './js/partner-form/show-partner-connect-form';\n\nimport './css/index';\n\nconst Template = new SiteTemplate();\nexport {\n\tlanguageSwitcher,\n\tPartnerForm,\n\tTemplate,\n\tSearchTitle,\n\tInvitationButton,\n\tLicenseButton,\n\tAvatarButton,\n};\n\n// Compatibility\n/**\n * @deprecated\n */\nwindow.showPartnerForm = showPartnerConnectForm;\n\n/**\n * @deprecated\n */\nwindow.B24 = {\n\t/**\n\t * @deprecated\n\t */\n\tlicenseInfoPopup: {\n\t\tshow(popupId, title, content, showDemoButton)\n\t\t{\n\t\t\tconst LicenseInfoPopup = Reflection.getClass('BX.Bitrix24.LicenseInfoPopup');\n\t\t\tif (LicenseInfoPopup)\n\t\t\t{\n\t\t\t\tLicenseInfoPopup.show(popupId, title, content, showDemoButton);\n\t\t\t}\n\t\t},\n\t},\n\n\t/**\n\t * @deprecated\n\t */\n\tupdateCounters(counters, send)\n\t{\n\t\tconst LeftMenu = Reflection.getClass('BX.Intranet.LeftMenu');\n\t\tif (LeftMenu)\n\t\t{\n\t\t\tLeftMenu.updateCounters(counters, send);\n\t\t}\n\t},\n};\n"],"names":["showPartnerConnectForm","params","Loc","setMessage","messages","showPartnerFormPopup","titleBar","getMessage","sendButtonText","options","partnerName","partnerUrl","Popup","Button","ButtonColor","Promise","all","Runtime","loadExtension","popupOptions","className","autoHide","cacheable","zIndex","offsetLeft","offsetTop","width","height","overlay","draggable","restrict","closeByEsc","closeIcon","content","encodeURI","buttons","color","SUCCESS","text","onclick","button","setTimeout","setClocking","showIntegratorApplicationForm","popup","show","Form","open","id","parseInt","Math","random","portalUri","forms","zones","lang","sec","defaultForm","showPartnerOrderForm","Type","isObject","noAllPaddings","borderRadius","contentBorderRadius","disableScroll","min","window","innerHeight","contentColor","contentNoPaddings","events","onPopupFirstShow","w","d","u","s","createElement","async","src","Date","now","h","getElementsByTagName","parentNode","insertBefore","document","showHelper","Helper","Reflection","getClass","PartnerForm","showConnectForm","showIntegrationOrderForm","ChatMenu","constructor","EventEmitter","subscribe","bind","getChatMenu","menuManager","getById","getCollaborationMenu","event","data","getData","entityId","target","closest","Public","openNavigationItem","fromItemId","from","name","toLowerCase","toItemId","to","chatMenu","unsetActive","setActive","reset","collaborationMenu","siteDir","isMessengerEmbedded","location","pathname","toString","startsWith","counters","menus","menu","counterId","counterValue","Object","entries","updateCounter","getBackUrl","backUrl","query","getQueryString","length","ignoredParams","search","slice","isStringFilled","vars","split","checkedIgnoredParams","isArray","result","variable","pair","equal","indexOf","key","value","includes","Composite","MemoryCache","isEnabled","isUndefined","frameRequestStart","isReady","BX","frameCache","frameDataInserted","frameRequestFail","showLoader","page","getStubContainer","querySelector","getLoaderContainer","remember","Tag","render","getLiveFeedSkeleton","getLiveFeedSidebar","getLiveFeedWorkArea","skeleton","container","stub","Dom","append","map","stream","console","error","top","encodeURIComponent","reason","status","getCompatData","redirectUrl","PULL","moduleId","command","callback","localStorage","get","set","Ajax","url","method","processData","skipBxHeader","emulateOnload","floor","RightBar","redraw","Event","passive","goTopButton","addClass","getContainer","removeClass","ready","rightBar","pageYOffset","dataset","lockRedraw","scrollWidth","documentElement","clientWidth","getElementById","Header","Footer","hide","GoTopButton","setEventNamespace","isShown","hasClass","emit","clientHeight","scrollTo","behavior","flag","setIcon","ButtonIcon","ANGLE_DOWN","ANGLE_UP","ButtonManager","createFromNode","CollaborationMenu","getMenu","counter","decrement","item","getItemById","itemData","getItemData","COUNTER","COUNTER_ID","max","SiteTemplate","getRightBar","getHeader","getFooter","getComposite","isNumber","maxWidth","config","JCClock","setOptions","centerXInline","centerX","centerYInline","centerY","minuteLength","hourLength","popupHeight","inaccuracy","cancelCheckClick","iframeMode","href","Browser","isMobile","referrer","origin","AppLayout","placementInterface","initializePlacement","prototype","cb","isPlainObject","param","keys","SearchTitle","containerId","buttonId","inputId","searchOptions","disabled","focus","close","clearSearch","closeResult","then","SearchTitleClass","catch","relatedTarget","AvatarButton","init","signDocumentsCounter","workTimeAvailable","unbindAll","getPopup","setFixed","createSkeletonFromConfig","style","response","clearBeforeInsertContent","AvatarWidget","getInstance","buttonWrapper","loader","WidgetLoader","bindElement","useAngle","fixed","resolve","reject","ajax","runAction","renderTo","Counter","Color","DANGER","size","Size","MEDIUM","useAirDesign","CounterStyle","FILLED_ALERT","WorkTimeStateIcon","state","workTimeState","action","workTimeAction","signDocumentsPullEventName","needActionCount","update","destroy","avatar","eventUserId","userId","LicenseButton","isCloud","ordersAwaitingPayment","licenseData","wrapper","Bitrix24LicenseWidget","IntranetLicenseWidget","runComponentAction","mode","CounterColor","delete","isSidePanelDemoLicense","SidePanel","Instance","bindAnchors","rules","condition","handler","FeaturePromotersRegistry","getPromoter","code","stopPropagation","preventDefault","isAdmin","BaseEvent","Number","count","GLOBAL_TARGET","infrastructureForm","contentCallback","secCode","rightBoundary","onOpen","onOpenComplete","addEventListener","detail","object","identification","InvitationButton","invitationCounter","InvitationWidget","analyticsLabel","headerPopup","subscribeOnce","shouldShowStructureCounter","LanguageSwitcher","showLanguageListPopup","languages","hideLanguageListPopup","switchPortalLanguage","languageCode","windowScrollHandler","closeByEcs","cachable","onPopupClose","unbind","forEach","languageItem","languageItemElement","NAME","IS_BETA","languageSwitcher","Template","showPartnerForm","B24","licenseInfoPopup","popupId","title","showDemoButton","LicenseInfoPopup","updateCounters","send","LeftMenu"],"mappings":";;;;;;CAUO,eAAeA,sBAAsB,CAACC,MAA6B,EAC1E;GACCC,aAAG,CAACC,UAAU,CAACF,MAAM,CAACG,QAAQ,CAAC;GAC/B,MAAMC,oBAAoB,CAAC;KAC1B,GAAGJ,MAAM;KACTK,QAAQ,EAAEJ,aAAG,CAACK,UAAU,CAAC,oBAAoB,CAAC;KAC9CC,cAAc,EAAEN,aAAG,CAACK,UAAU,CAAC,kBAAkB;IACjD,CAAC;CACH;CAUA,eAAeF,oBAAoB,CAACI,OAAoC,EACxE;GACC,MAAMH,QAAQ,GAAGG,OAAO,CAACH,QAAQ;GACjC,MAAME,cAAc,GAAGC,OAAO,CAACD,cAAc;GAC7C,MAAME,WAAW,GAAGD,OAAO,CAACC,WAAW;GACvC,MAAMC,UAAU,GAAGF,OAAO,CAACE,UAAU;GAErC,MAAM,CAAC;KAAEC;IAAO,EAAE;KAAEC,MAAM;KAAEC;IAAa,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC9DC,iBAAO,CAACC,aAAa,CAAC,YAAY,CAAC,EACnCD,iBAAO,CAACC,aAAa,CAAC,YAAY,CAAC,CACnC,CAAC;GAEF,MAAMC,YAA0B,GAAG;KAClCC,SAAS,EAAE,yBAAyB;KACpCC,QAAQ,EAAE,KAAK;KACfC,SAAS,EAAE,KAAK;KAChBC,MAAM,EAAE,CAAC;KACTC,UAAU,EAAE,CAAC;KACbC,SAAS,EAAE,CAAC;KACZC,KAAK,EAAE,GAAG;KACVC,MAAM,EAAE,GAAG;KACXC,OAAO,EAAE,IAAI;KACbC,SAAS,EAAE;OAAEC,QAAQ,EAAE;MAAM;KAC7BC,UAAU,EAAE,IAAI;KAChBzB,QAAQ;KACR0B,SAAS,EAAE,IAAI;KACfC,OAAO,EAAG;;yDAE6C/B,aAAG,CAACK,UAAU,CAAC,wBAAwB,CAAE;;yDAEzCG,WAAY;6DACRwB,SAAS,CAACvB,UAAU,CAAE,qBAAoBT,aAAG,CAACK,UAAU,CAAC,wBAAwB,CAAE;;wDAExFL,aAAG,CAACK,UAAU,CAAC,kCAAkC,CAAE;;GAExG;KACD4B,OAAO,EAAE,CACR,IAAItB,MAAM,CAAC;OACVuB,KAAK,EAAEtB,WAAW,CAACuB,OAAO;OAC1BC,IAAI,EAAE9B,cAAc;OACpB+B,OAAO,EAAE,MAAOC,MAAc,IAAK;SAClCC,UAAU,CAAC,MAAM;WAChBD,MAAM,CAACE,WAAW,CAAC,IAAI,CAAC;UACxB,EAAE,GAAG,CAAC;SACP,MAAMC,6BAA6B,EAAE;SACrCH,MAAM,CAACE,WAAW,CAAC,KAAK,CAAC;;MAE1B,CAAC;IAEH;GAED,MAAME,KAAoB,GAAG,IAAIhC,KAAK,CAACO,YAAY,CAAC;GAEpDyB,KAAK,CAACC,IAAI,EAAE;CACb;CAEA,eAAeF,6BAA6B,GAC5C;GACC,MAAM;KAAEG;IAAM,GAAG,MAAM7B,iBAAO,CAACC,aAAa,CAAC,kBAAkB,CAAC;GAEhE4B,IAAI,CAACC,IAAI,CAAC;KACTC,EAAE,EAAG,iCAAgCC,QAAQ,CAACC,IAAI,CAACC,MAAM,EAAE,GAAG,IAAI,EAAE,EAAE,CAAE,EAAC;KACzEC,SAAS,EAAE,uBAAuB;KAClCC,KAAK,EAAE,CACN;OAAEC,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACrD;OAAEF,KAAK,EAAE,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACxE;OAAEF,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACjE;OAAEF,KAAK,EAAE,CAAC,QAAQ,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACzD;OAAEF,KAAK,EAAE,CAAC,OAAO,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,OAAO;OAAEC,GAAG,EAAE;MAAU,EAC3D;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,OAAO;OAAEC,GAAG,EAAE;MAAU,EACxD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACrD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACrD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACrD;OAAEF,KAAK,EAAE,CAAC,QAAQ,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACzD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACrD;OAAEF,KAAK,EAAE,CAAC,QAAQ,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACzD;OAAEF,KAAK,EAAE,CAAC,QAAQ,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACzD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACrD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACrD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,IAAI;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACtD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,IAAI;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,EACtD;OAAEF,KAAK,EAAE,CAAC,IAAI,CAAC;OAAEN,EAAE,EAAE,IAAI;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;MAAU,CACtD;KACDC,WAAW,EAAE;OAAET,EAAE,EAAE,GAAG;OAAEO,IAAI,EAAE,IAAI;OAAEC,GAAG,EAAE;;IACzC,CAAC;CACH;;CCzGO,eAAeE,oBAAoB,CAACzD,MAAkC,EAC7E;GACC,IAAI0D,cAAI,CAACC,QAAQ,CAAC3D,MAAM,CAAC,KAAK,KAAK,EACnC;KACC;;GAGD,MAAM;KAAEW;IAAO,GAAG,MAAMK,iBAAO,CAACC,aAAa,CAAC,YAAY,CAAC;GAE3D,MAAMC,YAA0B,GAAG;KAClC6B,EAAE,EAAE,qBAAqB;KACzB3B,QAAQ,EAAE,IAAI;KACdwC,aAAa,EAAE,IAAI;KACnBtC,MAAM,EAAE,CAAC;KACTC,UAAU,EAAE,CAAC;KACbC,SAAS,EAAE,CAAC;KACZG,OAAO,EAAE,IAAI;KACbkC,YAAY,EAAE,MAAM;KACpBC,mBAAmB,EAAE,MAAM;KAC3BC,aAAa,EAAE,IAAI;KACnBrC,MAAM,EAAEuB,IAAI,CAACe,GAAG,CAACC,MAAM,CAACC,WAAW,GAAG,EAAE,EAAE,GAAG,CAAC;KAC9CzC,KAAK,EAAE,GAAG;KACVG,SAAS,EAAE;OAAEC,QAAQ,EAAE;MAAM;KAC7BC,UAAU,EAAE,IAAI;KAChBqC,YAAY,EAAE,OAAO;KACrBC,iBAAiB,EAAE,IAAI;KACvB/C,SAAS,EAAE,KAAK;KAChBW,OAAO,EAAG;mCACuBhC,MAAM,CAAC+C,EAAG,IAAG/C,MAAM,CAACuD,GAAI;;;;;;;uEAOYvD,MAAM,CAAC+C,EAAG,IAAG/C,MAAM,CAACuD,GAAI;;GAE5F;KACDc,MAAM,EAAE;OACPC,gBAAgB,GAChB;SACC,CAAC,UAASC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;WAClB,IAAIC,CAAC,GAAGF,CAAC,CAACG,aAAa,CAAC,QAAQ,CAAC;WACjCD,CAAC,CAACE,KAAK,GAAG,IAAI;WACdF,CAAC,CAACG,GAAG,GAAGJ,CAAC,GAAG,GAAG,IAAIK,IAAI,CAACC,GAAG,EAAE,GAAG,MAAO,GAAG,CAAC,CAAC;WAC5C,IAAIC,CAAC,GAAGR,CAAC,CAACS,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;WAC3CD,CAAC,CAACE,UAAU,CAACC,YAAY,CAACT,CAAC,EAAEM,CAAC,CAAC;UAC/B,EAAEf,MAAM,EAAEmB,QAAQ,EAAG,gDAA+CpF,MAAM,CAAC+C,EAAG,IAAG/C,MAAM,CAACuD,GAAI,KAAI,CAAC;;;IAGpG;GAED,MAAMZ,KAAoB,GAAG,IAAIhC,KAAK,CAACO,YAAY,CAAC;GAEpDyB,KAAK,CAACC,IAAI,EAAE;CACb;;CC7DO,MAAMyC,UAAU,GAAG,YAA2B;GACpD,MAAMrE,iBAAO,CAACC,aAAa,CAAC,QAAQ,CAAC;GACrC,MAAMqE,MAAM,GAAGC,oBAAU,CAACC,QAAQ,CAAC,WAAW,CAAC;GAE/CF,MAAM,CAAC1C,IAAI,CAAC,+BAA+B,CAAC;CAC7C,CAAC;;CCHM,MAAM6C,WAAW,CACxB;GACC,aAAaC,eAAe,CAAC1F,MAA6B,EAC1D;KACC,OAAOD,sBAAsB,CAACC,MAAM,CAAC;;GAGtC,OAAO2F,wBAAwB,CAAC3F,MAAkC,EAClE;KACC,OAAOyD,oBAAoB,CAACzD,MAAM,CAAC;;GAGpC,aAAaqF,UAAU,GACvB;KACC,OAAOA,UAAU,EAAE;;CAErB;;CCnB2D;CAAA;CAAA;AAE3D,CAAO,MAAMO,QAAQ,CACrB;GACCC,WAAW,GACX;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KACCC,6BAAY,CAACC,SAAS,CAAC,0BAA0B,EAAE,4CAAI,gDAAuBC,IAAI,CAAC,IAAI,CAAC,CAAC;KACzFF,6BAAY,CAACC,SAAS,CAAC,sBAAsB,EAAE,4CAAI,8CAAsBC,IAAI,CAAC,IAAI,CAAC,CAAC;KACpFF,6BAAY,CAACC,SAAS,CAAC,wCAAwC,EAAE,4CAAI,gDAAuBC,IAAI,CAAC,IAAI,CAAC,CAAC;;GAGxGC,WAAW,GACX;;CAED;CACA;CACA;KACE,MAAMC,WAAW,GAAGX,oBAAU,CAACC,QAAQ,CAAC,iCAAiC,CAAC;KAC1E,IAAIU,WAAW,EACf;OACC,OAAOA,WAAW,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI;;KAGhD,OAAO,IAAI;;GAGZC,oBAAoB,GACpB;;CAED;CACA;CACA;KACE,MAAMF,WAAW,GAAGX,oBAAU,CAACC,QAAQ,CAAC,iCAAiC,CAAC;KAC1E,IAAIU,WAAW,EACf;OACC,OAAOA,WAAW,CAACC,OAAO,CAAC,2BAA2B,CAAC,IAAI,IAAI;;KAGhE,OAAO,IAAI;;CAyEb;CAAC,gCAtEsBE,KAAgB,EACtC;GAAA;GACC,MAAMC,IAAI,GAAGD,KAAK,CAACE,OAAO,EAAE;GAC5B,MAAM;KAAExD,EAAE;KAAEyD;IAAU,GAAGF,IAAI;GAC7B,IAAIG,MAAM,kBAAGH,IAAI,CAACD,KAAK,qBAAV,YAAYI,MAAM;GAC/B,IAAIA,MAAM,EACV;KACCA,MAAM,GAAGA,MAAM,CAACC,OAAO,CAAC,2CAA2C,CAAC;;GAGrE,MAAMC,MAAM,GAAGpB,oBAAU,CAACC,QAAQ,CAAC,qBAAqB,CAAC;GACzDmB,MAAM,oBAANA,MAAM,CAAEC,kBAAkB,CAAC;KAAE7D,EAAE;KAAEyD,QAAQ;KAAEC;IAAQ,CAAC;CACrD;CAAC,gCAEqBJ,KAAgB,EACtC;GACC,MAAMC,IAAI,GAAGD,KAAK,CAACE,OAAO,EAAE;GAE5B,IAAIM,UAAU,GAAGP,IAAI,CAACQ,IAAI,CAACC,IAAI,CAACC,WAAW,EAAE;GAC7C,IAAIH,UAAU,KAAK,QAAQ,IAAIP,IAAI,CAACQ,IAAI,CAACN,QAAQ,EACjD;KACCK,UAAU,GAAI,GAAEA,UAAW,IAAGP,IAAI,CAACQ,IAAI,CAACN,QAAS,EAAC;;GAGnD,IAAIS,QAAQ,GAAGX,IAAI,CAACY,EAAE,CAACH,IAAI,CAACC,WAAW,EAAE;GACzC,IAAIC,QAAQ,KAAK,QAAQ,IAAIX,IAAI,CAACY,EAAE,CAACV,QAAQ,EAC7C;KACCS,QAAQ,GAAI,GAAEA,QAAS,IAAGX,IAAI,CAACY,EAAE,CAACV,QAAS,EAAC;;GAG7C,MAAMW,QAAQ,GAAG,IAAI,CAAClB,WAAW,EAAE;GACnC,IAAIkB,QAAQ,KAAK,IAAI,EACrB;KACCA,QAAQ,CAACC,WAAW,CAACP,UAAU,CAAC;KAChCM,QAAQ,CAACE,SAAS,CAACJ,QAAQ,CAAC;KAC5BE,QAAQ,CAACG,KAAK,EAAE;;GAGjB,MAAMC,iBAAiB,GAAG,IAAI,CAACnB,oBAAoB,EAAE;GACrD,MAAMoB,OAAO,GAAGvH,aAAG,CAACK,UAAU,CAAC,UAAU,CAAC,IAAI,GAAG;GACjD,MAAMmH,mBAAmB,GAAGxD,MAAM,CAACyD,QAAQ,CAACC,QAAQ,CAACC,QAAQ,EAAE,CAACC,UAAU,CAAE,GAAEL,OAAQ,SAAQ,CAAC;GAC/F,IAAID,iBAAiB,KAAK,IAAI,EAC9B;KACC,IAAIE,mBAAmB,EACvB;OACCF,iBAAiB,CAACH,WAAW,CAACP,UAAU,CAAC;OACzCU,iBAAiB,CAACF,SAAS,CAACJ,QAAQ,CAAC;;KAGtCM,iBAAiB,CAACD,KAAK,EAAE;;CAE3B;CAAC,+BAEoBjB,KAAgB,EACrC;GACC,MAAMyB,QAAgC,GAAGzB,KAAK,CAACE,OAAO,EAAE;GACxD,MAAMwB,KAAK,GAAG,CAAC,IAAI,CAAC9B,WAAW,EAAE,EAAE,IAAI,CAACG,oBAAoB,EAAE,CAAC;GAC/D,KAAK,MAAM4B,IAAI,IAAID,KAAK,EACxB;KACC,IAAIC,IAAI,KAAK,IAAI,EACjB;OACC;;KAGD,KAAK,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACN,QAAQ,CAAC,EAChE;OACCE,IAAI,CAACK,aAAa,CAACJ,SAAS,EAAEC,YAAY,CAAC;;;CAG9C;;CC7GM,SAASI,UAAU,GAC1B;GACC,MAAMC,OAAO,GAAGtE,MAAM,CAACyD,QAAQ,CAACC,QAAQ;GACxC,MAAMa,KAAK,GAAGC,cAAc,CAAC,CAAC,QAAQ,EAAE,OAAO,EAAE,cAAc,EAAE,WAAW,CAAC,CAAC;GAE9E,OAAOF,OAAO,IAAIC,KAAK,CAACE,MAAM,GAAG,CAAC,GAAI,IAAGF,KAAM,EAAC,GAAG,EAAE,CAAC;CACvD;CAEA,SAASC,cAAc,CAACE,aAAa,EACrC;GACC,MAAMH,KAAK,GAAGvE,MAAM,CAACyD,QAAQ,CAACkB,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;GAE7C,IAAI,CAACnF,cAAI,CAACoF,cAAc,CAACN,KAAK,CAAC,EAC/B;KACC,OAAO,EAAE;;GAGV,MAAMO,IAAI,GAAGP,KAAK,CAACQ,KAAK,CAAC,GAAG,CAAC;GAC7B,MAAMC,oBAAoB,GAAGvF,cAAI,CAACwF,OAAO,CAACP,aAAa,CAAC,GAAGA,aAAa,GAAG,EAAE;GAE7E,IAAIQ,MAAM,GAAG,EAAE;GACf,KAAK,MAAMC,QAAQ,IAAIL,IAAI,EAC3B;KACC,MAAMM,IAAI,GAAGD,QAAQ,CAACJ,KAAK,CAAC,GAAG,CAAC;KAChC,MAAMM,KAAK,GAAGF,QAAQ,CAACG,OAAO,CAAC,GAAG,CAAC;KACnC,MAAMC,GAAG,GAAGH,IAAI,CAAC,CAAC,CAAC;KACnB,MAAMI,KAAK,GAAG/F,cAAI,CAACoF,cAAc,CAACO,IAAI,CAAC,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK;KAC5D,IAAI,CAACJ,oBAAoB,CAACS,QAAQ,CAACF,GAAG,CAAC,EACvC;OACC,IAAIL,MAAM,KAAK,EAAE,EACjB;SACCA,MAAM,IAAI,GAAG;;OAEdA,MAAM,IAAIK,GAAG,IAAIF,KAAK,KAAK,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,IAAIG,KAAK,KAAK,KAAK,GAAG,EAAE,GAAGA,KAAK,CAAC;;;GAI5E,OAAON,MAAM;CACd;;;;;;;ACxCA,CAIuC;CAAA;CAAA;CAAA;AAEvC,CAAO,MAAMQ,SAAS,CACtB;GAGC9D,WAAW,GACX;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA,OAHgC,IAAI+D,2BAAW;;KAI9C,IAAI,IAAI,CAACC,SAAS,EAAE,EACpB;OACC,4CAAI;;;GAINA,SAAS,GACT;KACC,OAAO,CAACnG,cAAI,CAACoG,WAAW,CAAC7F,MAAM,CAAC8F,iBAAiB,CAAC;;GAGnDC,OAAO,GACP;KAAA;KACC,OAAO,eAAA/F,MAAM,CAACgG,EAAE,8CAAT,WAAWC,UAAU,qBAArB,sBAAuBC,iBAAiB,MAAK,IAAI,IAAI,CAACzG,cAAI,CAACoG,WAAW,CAAC7F,MAAM,CAACmG,gBAAgB,CAAC;;GAGvGC,UAAU,GACV;KACC,MAAMC,IAAI,GAAGrG,MAAM,CAACyD,QAAQ,CAACC,QAAQ;KACrC,IAAI2C,IAAI,KAAK,UAAU,IAAIA,IAAI,KAAK,mBAAmB,IAAIA,IAAI,KAAK,YAAY,EAChF;OACC,4CAAI,4BAAa,QAAQ;MACzB,MAED;OACC9H,UAAU,CAAC,MAAM;SAChB,4CAAI;QACJ,EAAE,GAAG,CAAC;;;GAoCT+H,gBAAgB,GAChB;KACC,OAAOnF,QAAQ,CAACoF,aAAa,CAAC,YAAY,CAAC;;GAG5CC,kBAAkB,GAClB;KACC,OAAO,4CAAI,gBAAOC,QAAQ,CAAC,QAAQ,EAAE,MAAM;OAC1C,OAAOC,aAAG,CAACC,MAAM,cAAC;;;;;;;;IAQlB;MACA,CAAC;;GA6CHC,mBAAmB,GACnB;KACC,OAAO,4CAAI,gBAAOH,QAAQ,CAAC,eAAe,EAAE,MAAM;OACjD,OAAOC,aAAG,CAACC,MAAM,gBAAC;;;mCAGY,CAA4B;6CAClB,CAA6B;;;IAGrE,GAJgC,IAAI,CAACE,kBAAkB,EAAE,EACf,IAAI,CAACC,mBAAmB,EAAE;MAIpE,CAAC;;GAGHD,kBAAkB,GAClB;KACC,OAAO,4CAAI,gBAAOJ,QAAQ,CAAC,cAAc,EAAE,MAAM;OAChD,OAAOC,aAAG,CAACC,MAAM,gBAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAgHlB;MACA,CAAC;;GAGHG,mBAAmB,GACnB;KACC,OAAO,4CAAI,gBAAOL,QAAQ,CAAC,gBAAgB,EAAE,MAAM;OAClD,OAAOC,aAAG,CAACC,MAAM,gBAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA0GlB;MACA,CAAC;;CAEJ;CAAC,sBAnVYN,IAAY,GAAG,IAAI,EAC/B;GACC,IAAI,IAAI,CAACN,OAAO,EAAE,EAClB;KACC;;GAGD,MAAMgB,QAAQ,2CAAG,IAAI,sCAAkBV,IAAI,CAAC;GAC5C,MAAMW,SAAS,GAAG,IAAI,CAACV,gBAAgB,EAAE;GACzC,MAAMW,IAAI,GAAGF,QAAQ,WAARA,QAAQ,GAAI,IAAI,CAACP,kBAAkB,EAAE;GAClD,IAAI,CAACQ,SAAS,IAAIC,IAAI,CAAChG,UAAU,EACjC;KACC;;GAGDiG,aAAG,CAACC,MAAM,CAACF,IAAI,EAAED,SAAS,CAAC;CAC5B;CAAC,2BAEgBX,IAAY,EAC7B;GACC,MAAMe,GAAG,GAAG;KACXC,MAAM,EAAE,MAAM,IAAI,CAACT,mBAAmB;IACtC;GAED,IAAIQ,GAAG,CAACf,IAAI,CAAC,EACb;KACC,OAAOe,GAAG,CAACf,IAAI,CAAC,EAAE;;GAGnB,OAAO,IAAI;CACZ;CAAC,wBAuBD;GACCxE,6BAAY,CAACC,SAAS,CAAC,wBAAwB,EAAE,MAAM;KACtDwF,OAAO,CAACC,KAAK,CAAC,+BAA+B,CAAC;KAC9CC,GAAG,CAAC/D,QAAQ,GAAI,kBAAiBgE,kBAAkB,CAACpD,UAAU,EAAE,CAAE,EAAC;IACnE,CAAC;GAEFxC,6BAAY,CAACC,SAAS,CAAC,eAAe,EAAGM,KAAgB,IAAK;KAC7D,MAAM,CAACsF,MAAM,EAAEC,MAAM,CAAC,GAAGvF,KAAK,CAACwF,aAAa,EAAE;KAC9C,MAAMC,WAAW,GAAI,kBAAiBxD,UAAU,EAAG,EAAC;KACpD,IAAI,IAAI,CAACuB,SAAS,EAAE,KAAK8B,MAAM,KAAK,MAAM,IAAKA,MAAM,KAAK,QAAQ,IAAIC,MAAM,KAAK,GAAI,CAAC,EACtF;OACCL,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEG,MAAM,EAAEC,MAAM,CAAC;OACzDH,GAAG,CAAC/D,QAAQ,GAAGoE,WAAW;;IAE3B,CAAC;GAEF,IAAIC,gBAAI,EACR;KACCA,gBAAI,CAAChG,SAAS,CAAC;OACdiG,QAAQ,EAAE,MAAM;OAChBC,OAAO,EAAE,oBAAoB;OAC7BC,QAAQ,EAAE,MAAM;SACf1J,UAAU,CAAC,MAAM;WAChB,MAAMiH,KAAK,GAAGQ,EAAE,CAACkC,YAAY,CAACC,GAAG,CAAC,8BAA8B,CAAC;WACjE,IAAI,CAAC3C,KAAK,EACV;aACCQ,EAAE,CAACkC,YAAY,CAACE,GAAG,CAAC,8BAA8B,EAAE,SAAS,EAAE,CAAC,CAAC;aACjEC,cAAI,CAAC;eACJC,GAAG,EAAE,YAAY;eACjBC,MAAM,EAAE,KAAK;eACbC,WAAW,EAAE,KAAK;eAClBC,YAAY,EAAE,IAAI;eAClBC,aAAa,EAAE;cACf,CAAC;;UAEH,EAAE1J,IAAI,CAAC2J,KAAK,CAAC3J,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC;;MAEpC,CAAC;;CAEJ;;CCvIsC;CAAA;CAAA;CAAA;AAOvC,CAAO,MAAM2J,QAAQ,CACrB;GAMChH,WAAW,CAACrF,OAAwB,EACpC;KAAA;OAAA;OAAA,OAN8B;;KAAK;OAAA;OAAA,OACV;;KAAK;OAAA;OAAA,OACCyD,MAAM,CAACC;;KAAW;OAAA;OAAA;;KAKhD,MAAM4I,MAAM,GAAG,IAAI,CAACA,MAAM,CAAC9G,IAAI,CAAC,IAAI,CAAC;KACrC+G,eAAK,CAAC/G,IAAI,CAAC/B,MAAM,EAAE,QAAQ,EAAE6I,MAAM,EAAE;OAAEE,OAAO,EAAE;MAAM,CAAC;KACvDD,eAAK,CAAC/G,IAAI,CAAC/B,MAAM,EAAE,QAAQ,EAAE6I,MAAM,CAAC;KACpC,4CAAI,gDAAwB7I,MAAM,CAACC,WAAW;KAC9C,4CAAI,gCAAgB1D,OAAO,CAACyM,WAAW;KAEvC,4CAAI,8BAAclH,SAAS,CAAC,MAAM,EAAE,MAAM;OACzCoF,aAAG,CAAC+B,QAAQ,CAAC,IAAI,CAACC,YAAY,EAAE,EAAE,mBAAmB,CAAC;MACtD,CAAC;KAEF,4CAAI,8BAAcpH,SAAS,CAAC,MAAM,EAAE,MAAM;OACzCoF,aAAG,CAACiC,WAAW,CAAC,IAAI,CAACD,YAAY,EAAE,EAAE,mBAAmB,CAAC;MACzD,CAAC;KAEFJ,eAAK,CAACM,KAAK,CAAC,MAAM;OACjB,IAAI,CAACP,MAAM,EAAE;MACb,CAAC;;GAGHA,MAAM,GACN;KACC,MAAMQ,QAAQ,GAAG,IAAI,CAACH,YAAY,EAAE;KAEpC,4CAAI,gDAAwBlJ,MAAM,CAACC,WAAW;KAE9C,IAAID,MAAM,CAACsJ,WAAW,2CAAG,IAAI,6CAAqB,EAClD;OACC,IAAI,yCAAC,IAAI,+BAAc,EACvB;SACCpC,aAAG,CAAC+B,QAAQ,CAACI,QAAQ,EAAE,eAAe,CAAC;SACvC,4CAAI,kCAAiB,IAAI;;MAE1B,MACI,4CAAI,IAAI,iCACb;OACCnC,aAAG,CAACiC,WAAW,CAACE,QAAQ,EAAE,eAAe,CAAC;OAC1C,4CAAI,kCAAiB,KAAK;;KAG3B,IAAI,CAACA,QAAQ,IAAIA,QAAQ,CAACE,OAAO,CAACC,UAAU,KAAK,MAAM,EACvD;OACC;;KAGD,MAAMC,WAAW,GAAGtI,QAAQ,CAACuI,eAAe,CAACD,WAAW,GAAGtI,QAAQ,CAACuI,eAAe,CAACC,WAAW;KAC/F,IAAIF,WAAW,GAAG,CAAC,EACnB;OACC,IAAI,yCAAC,IAAI,yCAAmB,EAC5B;SACCvC,aAAG,CAAC+B,QAAQ,CAACI,QAAQ,EAAE,eAAe,CAAC;SACvC,4CAAI,4CAAsB,IAAI;;MAE/B,MACI,4CAAI,IAAI,2CACb;OACCnC,aAAG,CAACiC,WAAW,CAACE,QAAQ,EAAE,eAAe,CAAC;OAC1C,4CAAI,4CAAsB,KAAK;;;GAIjCH,YAAY,GACZ;KACC,OAAO/H,QAAQ,CAACyI,cAAc,CAAC,WAAW,CAAC;;CAE7C;;CChFO,MAAMC,MAAM,CACnB;GACCX,YAAY,GACZ;KACC,OAAO/H,QAAQ,CAACyI,cAAc,CAAC,QAAQ,CAAC;;CAE1C;;CCHO,MAAME,MAAM,CACnB;GACClI,WAAW,GACX;KACCC,6BAAY,CAACC,SAAS,CAAC,8BAA8B,EAAE,MAAM;OAC5D,IAAI,CAACiI,IAAI,EAAE;MACX,CAAC;;GAGHpL,IAAI,GACJ;KACCuI,aAAG,CAACiC,WAAW,CAAC,IAAI,CAACD,YAAY,EAAE,EAAE,QAAQ,CAAC;;GAG/Ca,IAAI,GACJ;KACC7C,aAAG,CAAC+B,QAAQ,CAAC,IAAI,CAACC,YAAY,EAAE,EAAE,QAAQ,CAAC;;GAG5CA,YAAY,GACZ;KACC,OAAO/H,QAAQ,CAACyI,cAAc,CAAC,YAAY,CAAC;;CAE9C;;CCxBuD;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAEvD,CAAO,MAAMI,WAAW,SAASnI,6BAAY,CAC7C;GAKCD,WAAW,GAAG;KACb,KAAK,EAAE;KAAC;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA,OALW;;KAAC;OAAA;OAAA,OACP;;KAAK;OAAA;OAAA;;KAMlB,IAAI,CAACqI,iBAAiB,CAAC,aAAa,CAAC;KACrC,4CAAI;;GAGLC,OAAO,GACP;KACC,OAAOhD,aAAG,CAACiD,QAAQ,yCAAC,IAAI,2CAAsB,QAAQ,CAAC;;CAgGzD;CAAC,kBA5FA;GACC,IAAI,CAACC,IAAI,CAAC,MAAM,CAAC;GACjBlD,aAAG,CAAC+B,QAAQ,yCAAC,IAAI,2CAAsB,QAAQ,CAAC;CACjD;CAAC,kBAGD;GACC,IAAI,CAACmB,IAAI,CAAC,MAAM,CAAC;GACjBlD,aAAG,CAACiC,WAAW,yCAAC,IAAI,2CAAsB,QAAQ,CAAC;CACpD;CAAC,8BAGD;GACC,OAAOhI,QAAQ,CAACyI,cAAc,CAAC,oBAAoB,CAAC;CACrD;CAAC,0BAGD;GACCd,eAAK,CAACM,KAAK,CAAC,MAAM;KACjB,4CAAI;KAEJN,eAAK,CAAC/G,IAAI,CAAC/B,MAAM,EAAE,QAAQ,EAAE,MAAM;OAClC,4CAAI;MACJ,CAAC;KAEF8I,eAAK,CAAC/G,IAAI,yCAAC,IAAI,2CAAsB,OAAO,EAAE,MAAM;OACnD,4CAAI;MACJ,CAAC;IACF,CAAC;CACH;CAAC,0BAGD;GACC,IAAI/B,MAAM,CAACsJ,WAAW,GAAGnI,QAAQ,CAACuI,eAAe,CAACW,YAAY,EAC9D;KACC,4CAAI;KAEJ,4CAAI,IAAI,6BACR;OACC,4CAAI,8BAAc,KAAK;OACvB,4CAAI,0CAAqB,CAAC;;IAE3B,MACI,IAAI,4CAAI,gCAAiB,KAAK,EACnC;KACC,4CAAI;;CAEN;CAAC,+BAGD;GACC,4CAAI,IAAI,6BACR;KACC,4CAAI,8BAAc,KAAK;KAEvBrK,MAAM,CAACsK,QAAQ,CAAC;OACf9C,GAAG,0CAAE,IAAI,uCAAkB;OAC3B+C,QAAQ,EAAE;MACV,CAAC;KAEF,4CAAI,0CAAqB,CAAC;IAC1B,MAED;KACC,4CAAI,8BAAc,IAAI;KACtB,4CAAI,0CAAqBvK,MAAM,CAACsJ,WAAW;KAE3CtJ,MAAM,CAACsK,QAAQ,CAAC;OACf9C,GAAG,EAAE,CAAC;OACN+C,QAAQ,EAAE;MACV,CAAC;;CAEJ;CAAC,uBAEYC,IAAa,GAAG,IAAI,EACjC;GACC,4CAAI,8BAAeA,IAAI;GAEvB,4CAAI,IAAI,6BACR;KACC,4CAAI,4BAAcC,OAAO,CAACC,qBAAU,CAACC,UAAU,CAAC;IAChD,MAED;KACC,4CAAI,4BAAcF,OAAO,CAACC,qBAAU,CAACE,QAAQ,CAAC;;CAEhD;CAAC,uBAGD;GACC,OAAO,4CAAI,uBAAYC,wBAAa,CAACC,cAAc,CAAC3J,QAAQ,CAACyI,cAAc,CAAC,aAAa,CAAC,CAAC;CAC5F;;CCjH0D;CAAA;AAE3D,CAAO,MAAMmB,iBAAiB,CAC9B;GACCnJ,WAAW,GACX;KAAA;OAAA;;KAAA;OAAA;;KACCC,6BAAY,CAACC,SAAS,CAAC,0BAA0B,EAAE,4CAAI,kDAAsBC,IAAI,CAAC,IAAI,CAAC,CAAC;KACxFF,6BAAY,CAACC,SAAS,CAAC,oBAAoB,EAAE,4CAAI,oEAAiCC,IAAI,CAAC,IAAI,CAAC,CAAC;;GAG9FiJ,OAAO,GACP;;CAED;CACA;CACA;KACE,MAAM/I,WAAW,GAAGX,oBAAU,CAACC,QAAQ,CAAC,iCAAiC,CAAC;KAC1E,IAAIU,WAAW,EACf;OACC,OAAOA,WAAW,CAACC,OAAO,CAAC,2BAA2B,CAAC;;KAGxD,OAAO,IAAI;;CA0Bb;CAAC,iCAvBqBE,KAAgB,EACrC;GACC,MAAM2B,IAAI,GAAG,IAAI,CAACiH,OAAO,EAAE;GAC3B,MAAM,CAACC,OAAO,CAAC,GAAG7I,KAAK,CAACwF,aAAa,EAAE;GACvC7D,IAAI,oBAAJA,IAAI,CAAEK,aAAa,CAAC,YAAY,EAAE6G,OAAO,CAAC;CAC3C;CAAC,0CAE+B7I,KAAgB,EAChD;GACC,MAAM,CAAC8I,SAAS,CAAC,GAAG9I,KAAK,CAACwF,aAAa,EAAE;GACzC,MAAM7D,IAAI,GAAG,IAAI,CAACiH,OAAO,EAAE;GAC3B,IAAIjH,IAAI,EACR;KACC,MAAMoH,IAAI,GAAGpH,IAAI,CAACqH,WAAW,CAAC,gBAAgB,CAAC;KAC/C,IAAID,IAAI,EACR;OACC,MAAME,QAAQ,GAAGtH,IAAI,CAACuH,WAAW,CAACH,IAAI,CAAC;OACvC,MAAM;SAAEI,OAAO;SAAEC;QAAY,GAAGH,QAAQ;OAExCtH,IAAI,oBAAJA,IAAI,CAAEK,aAAa,CAACoH,UAAU,EAAExM,IAAI,CAACyM,GAAG,CAAC,CAAC,EAAEF,OAAO,GAAGL,SAAS,CAAC,CAAC;;;CAGpE;;CCxCwD;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAEzD,CAAO,MAAMQ,YAAY,CACzB;GASC9J,WAAW,GACX;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA,OATsB;;KAAI;OAAA;OAAA,OACR;;KAAI;OAAA;OAAA,OACJ;;KAAI;OAAA;OAAA,OACE;;KAAI;OAAA;OAAA,OACN;;KAAI;OAAA;OAAA,OACE;;KAAI;OAAA;OAAA,OACQ;;KAIvC,4CAAI;KAEJ,4CAAI;KACJ,4CAAI;KACJ,4CAAI;KAEJ,4CAAI,oCAAgB,IAAIoI,WAAW,EAAE;KACrC,4CAAI,0BAAa,IAAIpB,QAAQ,CAAC;OAC7BI,WAAW,0CAAE,IAAI;MACjB,CAAC;KACF,4CAAI,sBAAW,IAAIa,MAAM,EAAE;KAC3B,4CAAI,sBAAW,IAAIC,MAAM,EAAE;KAC3B,4CAAI,4BAAc,IAAIpE,SAAS,EAAE;KACjC,4CAAI,0BAAa,IAAI/D,QAAQ,EAAE;KAC/B,4CAAI,4CAAsB,IAAIoJ,iBAAiB,EAAE;KAEjD,4CAAI;;GAGLY,WAAW,GACX;KACC,+CAAO,IAAI;;GAGZC,SAAS,GACT;KACC,+CAAO,IAAI;;GAGZC,SAAS,GACT;KACC,+CAAO,IAAI;;GAGZC,YAAY,GACZ;KACC,+CAAO,IAAI;;GAGZ9J,WAAW,GACX;KACC,+CAAO,IAAI;;GAGZG,oBAAoB,GACpB;KACC,+CAAO,IAAI;;CA0Fb;CAAC,4BAtFA;GACCN,6BAAY,CAACC,SAAS,CAAC,qBAAqB,EAAGM,KAAgB,IAAK;KACnE,MAAM;OAAErG;MAAQ,GAAGqG,KAAK,CAACE,OAAO,EAAE;KAClC,IAAIvG,MAAM,IAAI0D,cAAI,CAACsM,QAAQ,CAAChQ,MAAM,CAACiQ,QAAQ,CAAC,EAC5C;;OAECjQ,MAAM,CAACiQ,QAAQ,IAAI,EAAE;;IAEtB,CAAC;CACH;CAAC,0BAGD;GACCnK,6BAAY,CAACC,SAAS,CAAC,eAAe,EAAGmK,MAAM,IAAK;KACnDjM,MAAM,CAACkM,OAAO,CAACC,UAAU,CAAC;OACzBC,aAAa,EAAE,EAAE;OACjBC,OAAO,EAAE,EAAE;OACXC,aAAa,EAAE,EAAE;OACjBC,OAAO,EAAE,EAAE;OACXC,YAAY,EAAE,EAAE;OAChBC,UAAU,EAAE,EAAE;OACdC,WAAW,EAAE,GAAG;OAChBC,UAAU,EAAE,EAAE;OACdC,gBAAgB,EAAE;MAClB,CAAC;IACF,CAAC;CACH;CAAC,+BAGD;GACC,MAAMC,UAAU,GAAG7M,MAAM,KAAKA,MAAM,CAACwH,GAAG;GACxC,IAAIqF,UAAU,EACd;KACC7M,MAAM,CAACwH,GAAG,CAAC/D,QAAQ,GAAGzD,MAAM,CAACyD,QAAQ,CAACqJ,IAAI;;CAE5C;CAAC,iCAGD;GACC,IAAI,CAACC,iBAAO,CAACC,QAAQ,EAAE,IAAI7L,QAAQ,CAAC8L,QAAQ,KAAK,EAAE,IAAI9L,QAAQ,CAAC8L,QAAQ,CAACrJ,UAAU,CAACH,QAAQ,CAACyJ,MAAM,CAAC,KAAK,KAAK,EAC9G;KACCnQ,iBAAO,CAACC,aAAa,CAAC,0BAA0B,CAAC;;CAEnD;CAAC,0BAGD;GACC,MAAMmQ,SAAS,GAAG7L,oBAAU,CAACC,QAAQ,CAAC,mBAAmB,CAAC;GAC1D,IAAI,CAAC4L,SAAS,EACd;KACC;;GAGD,MAAMC,kBAAkB,GAAGD,SAAS,CAACE,mBAAmB,CAAC,SAAS,CAAC;GACnED,kBAAkB,CAACE,SAAS,CAAClM,UAAU,GAAG,gBAAerF,MAAM,EAAEwR,EAAE,EACnE;KACC,IAAIhJ,KAAK,GAAG,EAAE;KACd,IAAI9E,cAAI,CAACsM,QAAQ,CAAChQ,MAAM,CAAC,EACzB;OACCwI,KAAK,GAAI,wBAAuBxI,MAAO,EAAC;MACxC,MACI,IAAI0D,cAAI,CAACoF,cAAc,CAAC9I,MAAM,CAAC,EACpC;OACCwI,KAAK,GAAGxI,MAAM;MACd,MACI,IAAI0D,cAAI,CAAC+N,aAAa,CAACzR,MAAM,CAAC,EACnC;OACC,KAAK,MAAM0R,KAAK,IAAIvJ,MAAM,CAACwJ,IAAI,CAAC3R,MAAM,CAAC,EACvC;SACC,IAAIwI,KAAK,CAACE,MAAM,GAAG,CAAC,EACpB;WACCF,KAAK,IAAI,GAAG;;SAGbA,KAAK,IAAK,GAAEkJ,KAAM,IAAG1R,MAAM,CAAC0R,KAAK,CAAE,EAAC;;;KAItC,IAAIlJ,KAAK,CAACE,MAAM,GAAG,CAAC,EACpB;OACC,MAAM1H,iBAAO,CAACC,aAAa,CAAC,QAAQ,CAAC;OACrC,MAAMqE,MAAM,GAAGC,oBAAU,CAACC,QAAQ,CAAC,WAAW,CAAC;OAC/CF,MAAM,CAAC1C,IAAI,CAAC4F,KAAK,CAAC;;IAEnB;CACF;;CC7JkF;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAEnF,CAAO,MAAMoJ,WAAW,CACxB;GAQC/L,WAAW,CAACrF,OAAO,EACnB;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA,OAR6B;;KAAE;OAAA;OAAA,OACH;;KAAK;OAAA;OAAA,OACP;;KAAI;OAAA;OAAA,OACP;;KAAI;OAAA;OAAA,OACA;;KAAI;OAAA;OAAA,OACR;;KAItB,4CAAI,4BAAc4E,QAAQ,CAACyI,cAAc,CAACrN,OAAO,CAACqR,WAAW,CAAC;KAC9D,4CAAI,0BAAWzM,QAAQ,CAACyI,cAAc,CAACrN,OAAO,CAACsR,QAAQ,CAAC;KACxD,4CAAI,oBAAU1M,QAAQ,CAACyI,cAAc,CAACrN,OAAO,CAACuR,OAAO,CAAC;KAEtD,4CAAI,oCAAkBvR,OAAO,CAACwR,aAAa;KAE3CjF,eAAK,CAAC/G,IAAI,yCAAC,IAAI,yBAAU,OAAO,EAAE,4CAAI,8CAAoBA,IAAI,CAAC,IAAI,CAAC,CAAC;KACrE+G,eAAK,CAAC/G,IAAI,yCAAC,IAAI,mBAAS,UAAU,EAAE,4CAAI,8CAAsBA,IAAI,CAAC,IAAI,CAAC,CAAC;;GAG1ElD,IAAI,GACJ;KACCqI,aAAG,CAAC+B,QAAQ,yCAAC,IAAI,2BAAa,UAAU,CAAC;KAEzC,4CAAI,kBAAQ+E,QAAQ,GAAG,KAAK;KAE5BzP,UAAU,CAAC,MAAM;OAChB,4CAAI,kBAAQ0P,KAAK,EAAE;MACnB,EAAE,GAAG,CAAC;;GAGRC,KAAK,GACL;KACChH,aAAG,CAACiC,WAAW,yCAAC,IAAI,2BAAa,UAAU,CAAC;KAC5C,4CAAI,kBAAQ6E,QAAQ,GAAG,IAAI;KAE3B,IAAI,4CAAI,kDAA0B,IAAI,EACtC;OACC,4CAAI,8CAAsBG,WAAW,EAAE;OACvC,4CAAI,8CAAsBC,WAAW,EAAE;;;CAoC1C;CAAC,iCA/BA;GACC,IAAIlH,aAAG,CAACiD,QAAQ,yCAAC,IAAI,2BAAa,UAAU,CAAC,EAC7C;KACC,IAAI,CAAC+D,KAAK,EAAE;IACZ,MAED;KACC,IAAI,CAACrP,IAAI,EAAE;;GAGZ,4CAAI,IAAI,uCACR;KACC;;GAGD,4CAAI,wCAAoB,IAAI;GAC5B9B,iBAAO,CAACC,aAAa,CAAC,uBAAuB,CAAC,CAACqR,IAAI,CAAC,MAAM;KACzD,MAAMC,gBAAgB,GAAGhN,oBAAU,CAACC,QAAQ,CAAC,yBAAyB,CAAC;KACvE,4CAAI,gDAAwB,IAAI+M,gBAAgB,yCAAC,IAAI,kCAAgB;IACrE,CAAC,CAACC,KAAK,CAAEhH,KAAK,IAAK;KACnBD,OAAO,CAACC,KAAK,CAACA,KAAK,CAAC;IACpB,CAAC;CACH;CAAC,+BAEoBnF,KAAK,EAC1B;GACC,IAAI,CAAC3C,cAAI,CAACoF,cAAc,CAAC,4CAAI,kBAAQW,KAAK,CAAC,IAAIpD,KAAK,CAACoM,aAAa,6CAAK,IAAI,uBAAQ,EACnF;KACC,IAAI,CAACN,KAAK,EAAE;;CAEd;;CCtEgE;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAYjE,CAAO,MAAMO,YAAY,CACzB;GAKC,OAAOC,IAAI,CAACnS,OAA4B,EACxC;KACC,4CAAI,wBAAYA,OAAO;KACvB,4CAAI,oCAAkB4E,QAAQ,CAACoF,aAAa,CAAC,8BAA8B,CAAC;KAC5E,4CAAI;KAEJ,IAAI,4CAAI,sBAAUoI,oBAAoB,GAAG,CAAC,EAC1C;OACC,4CAAI;OACJ,4CAAI;;KAGL,IAAI,4CAAI,sBAAUC,iBAAiB,EACnC;OACC,4CAAI;;KAGL9F,eAAK,CAAC/G,IAAI,yCAAC,IAAI,mCAAiB,OAAO,EAAE,MAAM;OAC9C+G,eAAK,CAAC+F,SAAS,yCAAC,IAAI,kCAAgB;OACpC,4CAAI,wCAAoBC,QAAQ,EAAE,CAACC,QAAQ,CAAC,IAAI,CAAC;OACjD,4CAAI,wCACFC,wBAAwB,CAACzS,OAAO,CAACwK,QAAQ,CAAC,CAC1CpI,IAAI,EAAE;OACR,4CAAI;OACJ,4CAAI,wCAAoBmQ,QAAQ,EAAE,CAAChN,SAAS,CAAC,SAAS,EAAE,MAAM;SAC7D,4CAAI;QACJ,CAAC;OACF,4CAAI,wCAAoBgN,QAAQ,EAAE,CAAChN,SAAS,CAAC,QAAQ,EAAE,MAAM;SAC5D,4CAAI;QACJ,CAAC;OACF/E,iBAAO,CAACC,aAAa,CAAC,CAAC,wBAAwB,CAAC,CAAC,CAACqR,IAAI,CAAC,MAAM;SAC5D,4CAAI;QACJ,CAAC,CAACE,KAAK,CAAC,MAAM,EAAE,CAAC;MAClB,CAAC;;CAmJJ;CAAC,6BA/IA;GACCrH,aAAG,CAAC+H,KAAK,yCAAC,IAAI,mCAAiB,SAAS,EAAE,GAAG,CAAC;CAC/C;CAAC,8BAGD;GACC/H,aAAG,CAAC+H,KAAK,yCAAC,IAAI,mCAAiB,SAAS,EAAE,GAAG,CAAC;CAC/C;CAAC,wBAGD;GACC,4CAAI,8BAAeZ,IAAI,CAAEa,QAAQ,IAAK;KACrC,4CAAI,wCAAoBC,wBAAwB,EAAE;KAClDC,kCAAY,CAACC,WAAW,EAAE,CAAClD,UAAU,CAAC;OACrCmD,aAAa,0CAAE,IAAI,iCAAe;OAClCC,MAAM,EAAE,4CAAI,wCAAoBT,QAAQ,EAAE;OAC1CzM,IAAI,EAAE6M,QAAQ,CAAC7M;MACf,CAAC,CAAC1D,IAAI,EAAE;KACTmK,eAAK,CAAC/G,IAAI,yCAAC,IAAI,mCAAiB,OAAO,EAAE,MAAM;OAC9CqN,kCAAY,CAACC,WAAW,EAAE,CAAC1Q,IAAI,EAAE;MACjC,CAAC;IACF,CAAC,CAAC4P,KAAK,CAAC,MAAM,EAAE,CAAC;CACnB;CAAC,6BAGD;GACC,OAAO,4CAAI,kBAAQ9H,QAAQ,CAAC,cAAc,EAAE,MAAM;KACjD,OAAO,IAAI+I,kCAAY,CAAC;OACvB1Q,EAAE,EAAE,wBAAwB;OAC5B2Q,WAAW,0CAAE,IAAI,iCAAe;OAChCvS,SAAS,EAAE,mCAAmC;OAC9CM,KAAK,EAAE,GAAG;OACVkS,QAAQ,EAAE,KAAK;OACfC,KAAK,EAAE,IAAI;OACXpS,SAAS,EAAE,CAAC,EAAE;OACdD,UAAU,EAAE,CAAC;MACb,CAAC;IACF,CAAC;CACH;CAAC,wBAGD;GACC,OAAO,4CAAI,kBAAQmJ,QAAQ,CAAC,SAAS,EAAE,MAAM;KAC5C,OAAO,IAAI5J,OAAO,CAAC,CAAC+S,OAAO,EAAEC,MAAM,KAAK;OACvCC,cAAI,CAACC,SAAS,CAAC,iCAAiC,CAAC,CAC/C1B,IAAI,CAAEa,QAAQ,IAAKU,OAAO,CAACV,QAAQ,CAAC,CAAC,CACrCX,KAAK,CAAEW,QAAQ,IAAKW,MAAM,CAACX,QAAQ,CAAC,CAAC;MAEvC,CAAC;IACF,CAAC;CACH;CAAC,yBAGD;GACC,4CAAI,8BAAec,QAAQ,yCAAC,IAAI,4CAAsB;CACvD;CAAC,+BAGD;GACC,4CAAI,0CAAqBA,QAAQ,yCAAC,IAAI,wDAA4B;CACnE;CAAC,+BAGD;GACC,OAAO,4CAAI,kBAAQvJ,QAAQ,CAAC,gBAAgB,EAAE,MAAM;KACnD,OAAO,4CAAI,kCAAgBF,aAAa,CAAC,mCAAmC,CAAC;IAC7E,CAAC;CACH;CAAC,qCAGD;GACC,OAAO,4CAAI,kBAAQE,QAAQ,CAAC,sBAAsB,EAAE,MAAM;KACzD,OAAO,4CAAI,kCAAgBF,aAAa,CAAC,2CAA2C,CAAC;IACrF,CAAC;CACH;CAAC,wBAGD;GACC,OAAO,4CAAI,kBAAQE,QAAQ,CAAC,SAAS,EAAE,MAAM;KAC5C,OAAO,IAAIwJ,cAAO,CAAC;OAClB/R,KAAK,EAAE+R,cAAO,CAACC,KAAK,CAACC,MAAM;OAC3BC,IAAI,EAAEH,cAAO,CAACI,IAAI,CAACC,MAAM;OACzB9K,KAAK,EAAE,4CAAI,sBAAUmJ,oBAAoB;OACzC4B,YAAY,EAAE,IAAI;OAClBtB,KAAK,EAAEuB,mBAAY,CAACC;MACpB,CAAC;IACF,CAAC;CACH;CAAC,8BAGD;GACC,OAAO,4CAAI,kBAAQhK,QAAQ,CAAC,eAAe,EAAE,MAAM;KAClD,OAAO,IAAIiK,2CAAiB,CAAC;OAC5BC,KAAK,EAAE,4CAAI,sBAAUC,aAAa;OAClCC,MAAM,EAAE,4CAAI,sBAAUC;MACtB,CAAC;IACF,CAAC;CACH;CAAC,6CAGD;GACChJ,gBAAI,CAAChG,SAAS,CAAC;KACdiG,QAAQ,EAAE,MAAM;KAChBC,OAAO,EAAE,4CAAI,sBAAU+I,0BAA0B;KACjD9I,QAAQ,EAAGlM,MAAM,IAAK;OACrB,IAAI,CAAC0D,cAAI,CAACsM,QAAQ,CAAChQ,MAAM,oBAANA,MAAM,CAAEiV,eAAe,CAAC,EAC3C;SACC;;OAGD,IAAI,CAAAjV,MAAM,oBAANA,MAAM,CAAEiV,eAAe,IAAG,CAAC,EAC/B;SACC,4CAAI,8BAAeC,MAAM,CAAClV,MAAM,CAACiV,eAAe,CAAC;QACjD,MAED;SACC,4CAAI,8BAAeE,OAAO,EAAE;;;IAG9B,CAAC;CACH;CAAC,4CAGD;GACC,MAAMC,MAAM,GAAG,4CAAI,kCAAgB5K,aAAa,CAAC,GAAG,CAAC;GAErD1E,6BAAY,CAACC,SAAS,CACrB,wCAAwC,EACvCM,KAAK,IAAK;KACV,MAAMC,IAAI,GAAGD,KAAK,CAACE,OAAO,EAAE,CAAC,CAAC,CAAC;KAC/B,MAAMgG,GAAG,GAAGjG,IAAI,IAAIA,IAAI,CAACiG,GAAG,GAAGjG,IAAI,CAACiG,GAAG,GAAG,EAAE;KAC5C,MAAM8I,WAAW,GAAG/O,IAAI,IAAIA,IAAI,CAACgP,MAAM,GAAGhP,IAAI,CAACgP,MAAM,GAAG,CAAC;KAEzD,IAAI,4CAAI,sBAAUA,MAAM,KAAKD,WAAW,IAAID,MAAM,EAClD;OACCA,MAAM,CAAClC,KAAK,GAAGxP,cAAI,CAACoF,cAAc,CAACyD,GAAG,CAAC,GACnC,kDAAiDtK,SAAS,CAACsK,GAAG,CAAE,IAAG,GACpE,EAAE;;IAGN,CACD;CACF;CAAC,sBAzLWmG,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;GAAA;CAAA;CAAA,sBAAZA,YAAY;GAAA;GAAA,OAGQ,IAAI9I,2BAAW;CAAE;CAAA,sBAHrC8I,YAAY;GAAA;GAAA;CAAA;;CCXU;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAcnC,CAAO,MAAM6C,aAAa,CAC1B;GAKC,OAAO5C,IAAI,CAACnS,OAA6B,EACzC;KACC,4CAAI,4BAAYA,OAAO;KACvB,4CAAI,oCAAkB4E,QAAQ,CAACoF,aAAa,CAAC,kCAAkC,CAAC;KAChF,4CAAI;KAEJ,IAAI,4CAAI,0BAAUgL,OAAO,IAAI,4CAAI,0BAAUC,qBAAqB,GAAG,CAAC,EACpE;OACC,4CAAI,sCAAkB,4CAAI,0BAAUA,qBAAqB;;KAG1D1I,eAAK,CAAC/G,IAAI,yCAAC,IAAI,mCAAiB,OAAO,EAAE,MAAM;OAC9C+G,eAAK,CAAC+F,SAAS,yCAAC,IAAI,kCAAgB;OACpC,4CAAI,4CACFG,wBAAwB,CAACzS,OAAO,CAACwK,QAAQ,CAAC,CAC1CpI,IAAI,EAAE;OACR5B,iBAAO,CAACC,aAAa,CAAC,yCAAC,IAAI,sDAA2B,CAAC,CAACqR,IAAI,CAAC,MAAM;SAClE,4CAAI;QACJ,CAAC,CAACE,KAAK,CAAC,MAAM,EAAE,CAAC;MAClB,CAAC;;CA4MJ;CAAC,oCAxMA;GACC,IAAI,4CAAI,0BAAUgD,OAAO,EACzB;KACC,OAAO,yBAAyB;;GAGjC,OAAO,yBAAyB;CACjC;CAAC,0BAGD;GACC,4CAAI,kCAAelD,IAAI,CAAEa,QAAQ,IAAK;KACrC,4CAAI,4CAAoBC,wBAAwB,EAAE;KAClD,IAAIsC,WAAW,GAAG,IAAI;KAEtB,IAAI,4CAAI,0BAAUF,OAAO,EACzB;OACCE,WAAW,GAAGvC,QAAQ,CAAC7M,IAAI;OAC3BoP,WAAW,CAAClC,MAAM,GAAG,4CAAI,4CAAoBT,QAAQ,EAAE;OACvD2C,WAAW,CAACC,OAAO,2CAAG,IAAI,iCAAe;MACzC,MAED;OACCD,WAAW,GAAG;SACblC,MAAM,EAAE,4CAAI,4CAAoBT,QAAQ,EAAE;SAC1CQ,aAAa,0CAAE,IAAI,iCAAe;SAClCjN,IAAI,EAAE6M,QAAQ,CAAC7M;QACf;;KAGF,4CAAI,4BAAc8J,UAAU,CAACsF,WAAW,CAAC,CAAC9S,IAAI,EAAE;KAChDmK,eAAK,CAAC/G,IAAI,yCAAC,IAAI,mCAAiB,OAAO,EAAE,MAAM;OAC9C,4CAAI,4BAAcpD,IAAI,EAAE;MACxB,CAAC;IACF,CAAC,CAAC4P,KAAK,CAAC,MAAM,EAAE,CAAC;CACnB;CAAC,uBAGD;GACC,OAAO,4CAAI,sBAAQ9H,QAAQ,CAAC,QAAQ,EAAE,MAAM;KAC3C,IAAI,4CAAI,0BAAU8K,OAAO,EACzB;OACC,OAAOI,oCAAqB,CAACtC,WAAW,EAAE;;KAG3C,OAAOuC,oCAAqB,CAACvC,WAAW,EAAE;IAC1C,CAAC;CACH;CAAC,+BAGD;GACC,OAAO,4CAAI,sBAAQ5I,QAAQ,CAAC,cAAc,EAAE,MAAM;KACjD,OAAO,IAAI+I,kCAAY,CAAC;OACvBC,WAAW,0CAAE,IAAI,iCAAe;OAChCjS,KAAK,EAAE,GAAG;OACVsB,EAAE,EAAE;MACJ,CAAC;IACF,CAAC;CACH;CAAC,0BAGD;GACC,OAAO,4CAAI,sBAAQ2H,QAAQ,CAAC,SAAS,EAAE,MAAM;KAC5C,OAAO,IAAI5J,OAAO,CAAC,CAAC+S,OAAO,EAAEC,MAAM,KAAK;OACvC,IAAI,4CAAI,0BAAU0B,OAAO,EACzB;SACCzB,cAAI,CAAC+B,kBAAkB,CAAC,gCAAgC,EAAE,SAAS,EAAE;WACpEC,IAAI,EAAE;UACN,CAAC,CACAzD,IAAI,CAAEa,QAAQ,IAAKU,OAAO,CAACV,QAAQ,CAAC,CAAC,CACrCX,KAAK,CAAEW,QAAQ,IAAKW,MAAM,CAACX,QAAQ,CAAC,CAAC;QAEvC,MAED;SACCY,cAAI,CAACC,SAAS,CAAC,oCAAoC,CAAC,CAClD1B,IAAI,CAAEa,QAAQ,IAAKU,OAAO,CAACV,QAAQ,CAAC,CAAC,CACrCX,KAAK,CAAEW,QAAQ,IAAKW,MAAM,CAACX,QAAQ,CAAC,CAAC;;MAGxC,CAAC;IACF,CAAC;CACH;CAAC,0BAGD;GACC,OAAO,4CAAI,sBAAQzI,QAAQ,CAAC,SAAS,EAAE,MAAM;KAC5C,OAAO,IAAIwJ,cAAO,CAAC;OAClB/R,KAAK,EAAE6T,mBAAY,CAAC5B,MAAM;OAC1BI,YAAY,EAAE,IAAI;OAClBtB,KAAK,EAAEuB,mBAAY,CAACC;MACpB,CAAC;IACF,CAAC;CACH;CAAC,iCAGD;GACC,OAAO,4CAAI,sBAAQhK,QAAQ,CAAC,iBAAiB,EAAE,MAAM;KACpD,OAAO,4CAAI,kCAAgBF,aAAa,CAAC,6BAA6B,CAAC;IACvE,CAAC;CACH;CAAC,2BAEuBf,KAAa,EACrC;GACC,IAAIA,KAAK,GAAG,CAAC,EACb;KACC,4CAAI,kCAAe0L,OAAO,EAAE;KAC5B,4CAAI,sBAAQc,MAAM,CAAC,SAAS,CAAC;;GAG9B,IAAIxM,KAAK,GAAG,CAAC,4CAAI,IAAI,+CAAqB,EAC1C;KACC,4CAAI,kCAAeyL,MAAM,CAACzL,KAAK,CAAC;KAChC,4CAAI,kCAAewK,QAAQ,yCAAC,IAAI,gDAAsB;;CAExD;CAAC,8BAGD;GACC,IAAI,4CAAI,0BAAUuB,OAAO,IAAI,4CAAI,0BAAUU,sBAAsB,EACjE;KACCjM,EAAE,CAACkM,SAAS,CAACC,QAAQ,CAACC,WAAW,CAAC;OACjCC,KAAK,EAAE,CACN;SACCC,SAAS,EAAE,CACV,8BAA8B,CAC9B;SACDC,OAAO,CAACnQ,KAAK,EACb;WACCoQ,sCAAwB,CAACC,WAAW,CAAC;aAAEC,IAAI,EAAE;YAAc,CAAC,CAAC/T,IAAI,EAAE;WACnEyD,KAAK,CAACuQ,eAAe,EAAE;WACvBvQ,KAAK,CAACwQ,cAAc,EAAE;;QAEvB;MAEF,CAAC;;GAGH,IAAI,4CAAI,0BAAUrB,OAAO,IAAI,4CAAI,0BAAUsB,OAAO,EAClD;KACC/K,gBAAI,CAAChG,SAAS,CAAC;OACdiG,QAAQ,EAAE,UAAU;OACpBC,OAAO,EAAE,kCAAkC;OAC3CC,QAAQ,EAAGlM,MAAM,IAAK;SACrB8F,6BAAY,CAACuI,IAAI,CAAC,gDAAgD,EAAE,IAAI0I,0BAAS,CAAC;WACjFzQ,IAAI,EAAE;aACL4I,OAAO,EAAE8H,MAAM,CAAChX,MAAM,CAACiX,KAAK;;UAE7B,CAAC,CAAC;SAEH,IAAIjX,MAAM,CAACiX,KAAK,GAAG,CAAC,EACpB;WACC,4CAAI,sCAAkBD,MAAM,CAAChX,MAAM,CAACiX,KAAK,CAAC;;;MAG5C,CAAC;KACFnR,6BAAY,CAACC,SAAS,CAACD,6BAAY,CAACoR,aAAa,EAAE,mCAAmC,EAAE,4CAAI,wDAA2BlR,IAAI,CAAC,IAAI,CAAC,CAAC;;CAEpI;CAAC,sCAGD;GACC,MAAMhG,MAAM,GAAG,4CAAI,0BAAUmX,kBAAkB;GAE/ClN,EAAE,CAACkM,SAAS,CAACC,QAAQ,CAACtT,IAAI,CACzB,0BAA0B,EAC1B;KACCsU,eAAe,EAAE,MAAM;OACtB,OAAQ,iCAAgCpX,MAAM,CAAC+C,EAAG,IAAG/C,MAAM,CAACqX,OAAQ,qCAAoC;MACxG;KACD5V,KAAK,EAAE,GAAG;KACV+R,MAAM,EAAE,gBAAgB;KACxBnS,SAAS,EAAE,KAAK;KAChBS,UAAU,EAAE,KAAK;KACjBwE,IAAI,EAAE;OAAEgR,aAAa,EAAE;MAAG;KAC1BjT,MAAM,EAAE;OACPkT,MAAM,EAAE,MAAM;SACb,CAAC,UAAShT,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;WAClB,MAAMC,CAAC,GAAGF,CAAC,CAACG,aAAa,CAAC,QAAQ,CAAC;WACnCD,CAAC,CAACE,KAAK,GAAG,IAAI;WACdF,CAAC,CAACG,GAAG,GAAI,GAAEJ,CAAE,IAAGK,IAAI,CAACC,GAAG,EAAE,GAAG,MAAO,GAAG,CAAE,EAAC;WAC1C,MAAMC,CAAC,GAAGR,CAAC,CAACS,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;WAC7CD,CAAC,CAACE,UAAU,CAACC,YAAY,CAACT,CAAC,EAAEM,CAAC,CAAC;UAC/B,EAAEf,MAAM,EAAEmB,QAAQ,EAAG,gDAA+CpF,MAAM,CAAC+C,EAAG,IAAG/C,MAAM,CAACqX,OAAQ,KAAI,CAAC;QACtG;OACDG,cAAc,EAAE,MAAM;SACrB/L,GAAG,CAACgM,gBAAgB,CAAC,uBAAuB,EAAGpR,KAAK,IAAK;WACxD,IAAIA,KAAK,CAACqR,MAAM,CAACC,MAAM,CAACC,cAAc,CAAC7U,EAAE,KAAK/C,MAAM,CAAC+C,EAAE,EACvD;aACCgR,cAAI,CAAC+B,kBAAkB,CAAC,gCAAgC,EAAE,gCAAgC,EAAE;eAC3FC,IAAI,EAAE,OAAO;eACbzP,IAAI,EAAE;cACN,CAAC;;UAEH,CAAC;;;IAGJ,CACD;CACF;CAAC,sBApOWiP,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;GAAA;CAAA;CAAA,sBAAbA,aAAa;GAAA;GAAA,OAIO,IAAI3L,2BAAW;CAAE;;CCrBL;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAS7C,CAAO,MAAMiO,gBAAgB,CAC7B;GAKC,OAAOlF,IAAI,CAACnS,OAAgC,EAC5C;KACC,4CAAI,4BAAYA,OAAO;KACvB,4CAAI,wCAAkB4E,QAAQ,CAACoF,aAAa,CAAC,8BAA8B,CAAC;KAE5EuC,eAAK,CAAC/G,IAAI,yCAAC,IAAI,uCAAiB,OAAO,EAAE,MAAM;OAC9C+G,eAAK,CAAC+F,SAAS,yCAAC,IAAI,sCAAgB;OACpC,4CAAI,4CACFG,wBAAwB,CAACzS,OAAO,CAACwK,QAAQ,CAAC,CAC1CpI,IAAI,EAAE;OACR5B,iBAAO,CAACC,aAAa,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAACqR,IAAI,CAAC,MAAM;SAChE,4CAAI;QACJ,CAAC,CAACE,KAAK,CAAC,MAAM,EAAE,CAAC;MAClB,CAAC;KAEF,IAAI,4CAAI,0BAAUsF,iBAAiB,GAAG,CAAC,EACvC;OACC,4CAAI,kCAAe7D,QAAQ,yCAAC,IAAI,gDAAsB;;KAGvD,4CAAI;;CAgJN;CAAC,0BA5IA;GACC,4CAAI,kCAAe3B,IAAI,CAAEa,QAAQ,IAAK;KACrC,4CAAI,4CAAoBC,wBAAwB,EAAE;KAClD2E,0CAAgB,CAACzE,WAAW,EAAE,CAAClD,UAAU,CAAC;OACzCmD,aAAa,0CAAE,IAAI,qCAAe;OAClCC,MAAM,EAAE,4CAAI,4CAAoBT,QAAQ,EAAE;OAC1C,GAAGI,QAAQ,CAAC7M;MACZ,CAAC,CAAC1D,IAAI,EAAE;KACTmK,eAAK,CAAC/G,IAAI,yCAAC,IAAI,uCAAiB,OAAO,EAAE,MAAM;OAC9C+R,0CAAgB,CAACzE,WAAW,EAAE,CAAC1Q,IAAI,EAAE;MACrC,CAAC;IACF,CAAC,CAAC4P,KAAK,CAAC,MAAM,EAAE,CAAC;CACnB;CAAC,+BAGD;GACC,OAAO,4CAAI,sBAAQ9H,QAAQ,CAAC,cAAc,EAAE,MAAM;KACjD,OAAO,IAAI+I,kCAAY,CAAC;OACvBC,WAAW,0CAAE,IAAI,qCAAe;OAChCjS,KAAK,EAAE,GAAG;OACVsB,EAAE,EAAE;MACJ,CAAC;IACF,CAAC;CACH;CAAC,0BAGD;GACC,OAAO,4CAAI,sBAAQ2H,QAAQ,CAAC,SAAS,EAAE,MAAM;KAC5C,OAAO,IAAI5J,OAAO,CAAC,CAAC+S,OAAO,EAAEC,MAAM,KAAK;OACvCC,cAAI,CAACC,SAAS,CAAC,mCAAmC,EAAE;SACnD1N,IAAI,EAAE,EAAE;SACR0R,cAAc,EAAE;WACfC,WAAW,EAAE;;QAEd,CAAC,CACA3F,IAAI,CAAEa,QAAQ,IAAKU,OAAO,CAACV,QAAQ,CAAC,CAAC,CACrCX,KAAK,CAAEW,QAAQ,IAAKW,MAAM,CAACX,QAAQ,CAAC,CAAC;MAEvC,CAAC;IACF,CAAC;CACH;CAAC,gCAGD;GACCrN,6BAAY,CAACoS,aAAa,CAAC,yCAAyC,EAAE,4CAAI,wDAA2BlS,IAAI,CAAC,IAAI,CAAC,CAAC;GAChHF,6BAAY,CAACC,SAAS,CAAC,kBAAkB,EAAGM,KAAK,IAAK;KACrD,MAAM,CAAC4F,OAAO,EAAEjM,MAAM,CAAC,GAAGqG,KAAK,CAACwF,aAAa,EAAE;KAE/C,IAAII,OAAO,KAAK,cAAc,IAAIjM,MAAM,CAACC,aAAG,CAACK,UAAU,CAAC,SAAS,CAAC,CAAC,EACnE;OACC,MAAMmJ,KAAK,GAAGzJ,MAAM,CAACC,aAAG,CAACK,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,4CAAI,0BAAU2H,SAAS,CAAC;OAExE,IAAIwB,KAAK,GAAG,CAAC,EACb;SACC,4CAAI,kDAAwBA,KAAK;;;IAGnC,CAAC;CACH;CAAC,iCAE6BA,KAAK,EACnC;GACC,IAAI,4CAAI,0BAAU0O,0BAA0B,EAC5C;KACC1O,KAAK,EAAE;;GAGR,4CAAI,kCAAeyL,MAAM,CAACzL,KAAK,CAAC;GAChC,4CAAI,0BAAUqO,iBAAiB,GAAGrO,KAAK;GAEvC,IAAIA,KAAK,GAAG,CAAC,EACb;KACC,4CAAI,kCAAewK,QAAQ,yCAAC,IAAI,gDAAsB;IACtD,MAED;KACC,4CAAI,kCAAekB,OAAO,EAAE;KAC5B,4CAAI,sBAAQc,MAAM,CAAC,SAAS,CAAC;;CAE/B;CAAC,iCAGD;GACC,OAAO,4CAAI,sBAAQvL,QAAQ,CAAC,iBAAiB,EAAE,MAAM;KACpD,OAAO,4CAAI,sCAAgBF,aAAa,CAAC,4BAA4B,CAAC;IACtE,CAAC;CACH;CAAC,0BAGD;GACC,OAAO,4CAAI,sBAAQE,QAAQ,CAAC,SAAS,EAAE,MAAM;KAC5C,OAAO,IAAIwJ,cAAO,CAAC;OAClBzK,KAAK,0CAAE,IAAI,uCAAmB;OAC9BtH,KAAK,EAAE+R,cAAO,CAACC,KAAK,CAACC,MAAM;OAC3BI,YAAY,EAAE,IAAI;OAClBtB,KAAK,EAAEuB,mBAAY,CAACC;MACpB,CAAC;IACF,CAAC;CACH;CAAC,6BAGD;GAAA;GACC,IAAIxM,YAAY,GAAG8O,MAAM,CAAC,4CAAI,0BAAUc,iBAAiB,CAAC;GAC1D,6BAAI,4CAAI,0BAAUK,0BAA0B,oCAAI,KAAK,EACrD;KACCjQ,YAAY,EAAE;;GAGf,OAAOA,YAAY;CACpB;CAAC,sCAGD;GACC,IAAIuB,KAAK,GAAG,4CAAI,kCAAeA,KAAK;GAEpC,IAAI,CAAC/F,cAAI,CAACsM,QAAQ,CAACvG,KAAK,CAAC,EACzB;KACC;;GAGD,IAAI,CAAC,4CAAI,0BAAU0O,0BAA0B,EAC7C;KACC;;GAGD1O,KAAK,EAAE;GACP,4CAAI,0BAAU0O,0BAA0B,GAAG,KAAK;GAChD,4CAAI,kCAAejD,MAAM,CAACzL,KAAK,CAAC;GAChC,4CAAI,0BAAUqO,iBAAiB,GAAGrO,KAAK;GAEvC,IAAIA,KAAK,GAAG,CAAC,EACb;KACC,4CAAI,kCAAewK,QAAQ,yCAAC,IAAI,gDAAsB;IACtD,MAED;KACC,4CAAI,kCAAekB,OAAO,EAAE;KAC5B,4CAAI,sBAAQc,MAAM,CAAC,SAAS,CAAC;;CAE/B;CAAC,sBAzKW4B,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;GAAA;CAAA;CAAA,sBAAhBA,gBAAgB;GAAA;GAAA,OAGI,IAAIjO,2BAAW;CAAE;CAAA,sBAHrCiO,gBAAgB;GAAA;GAAA;CAAA;;;;;ACd7B,CAKsC;CAAA;CAAA;AAWtC,CAAO,MAAMO,gBAAgB,CAC7B;GAAA;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;;GAGC,MAAMC,qBAAqB,CAAC3E,WAAwB,EAAE4E,SAAuB,EAC7E;KACC,IAAI,yCAAC,IAAI,iBAAO,EAChB;OACC,8CAAM,IAAI,0BAAY5E,WAAW,EAAE4E,SAAS,CAAC;;KAG9C,IAAI,4CAAI,kBAAQnK,OAAO,EAAE,EACzB;OACC;;KAGD,4CAAI,kBAAQvL,IAAI,EAAE;;GA+BnB2V,qBAAqB,GACrB;KAAA;KACC,qEAAI,sCAAJ,sBAAapG,KAAK,EAAE;;GAGrBqG,oBAAoB,CAACC,YAAoB,EACzC;KACCxU,MAAM,CAACyD,QAAQ,CAACqJ,IAAI,GAAI,oBAAmB0H,YAAa,YAAWnQ,UAAU,EAAG,EAAC;;CAwBnF;CAAC,2BA3DiBoL,WAAwB,EAAE4E,SAAuB,EAClE;GACC,MAAMI,mBAAmB,GAAG,MAAM;KACjC,IAAI,CAACH,qBAAqB,EAAE;IAC5B;GAED,MAAM;KAAE5X;IAAO,GAAG,MAAMK,iBAAO,CAACC,aAAa,CAAC,YAAY,CAAC;GAE3D,MAAMC,YAA0B,GAAG;KAClCwS,WAAW;KACXtS,QAAQ,EAAE,IAAI;KACduX,UAAU,EAAE,IAAI;KAChBC,QAAQ,EAAE,KAAK;KACf5W,OAAO,0CAAE,IAAI,4CAAqBsW,SAAS,CAAC;KAC5CjU,MAAM,EAAE;OACPwU,YAAY,EAAE,MAAM;SACnB9L,eAAK,CAAC+L,MAAM,CAAC7U,MAAM,EAAE,QAAQ,EAAEyU,mBAAmB,CAAC;SACnD,4CAAI,kBAAQvD,OAAO,EAAE;SACrB,4CAAI,oBAAU,IAAI;;;IAGpB;GAED,4CAAI,oBAAU,IAAIxU,KAAK,CAACO,YAAY,CAAC;GAErC6L,eAAK,CAAC/G,IAAI,CAAC/B,MAAM,EAAE,QAAQ,EAAEyU,mBAAmB,CAAC;CAClD;CAAC,8BAYmBJ,SAAuB,EAC3C;GACC,MAAMrN,SAAS,GAAGN,aAAG,CAACC,MAAM,oBAAC,mDAAiD,EAAC;GAE/EzC,MAAM,CAACC,OAAO,CAACkQ,SAAS,CAAC,CAACS,OAAO,CAAC,CAAC,CAACN,YAAoB,EAAEO,YAA8B,CAAC,KAAK;KAC7F,MAAMC,mBAAmB,GAAGtO,aAAG,CAACC,MAAM,sBAAC;;iEAEqB,CAAoB;4DACzB,CAAuC;;IAE9F,GAH8DoO,YAAY,CAACE,IAAI,EACtBF,YAAY,CAACG,OAAO,GAAG,QAAQ,GAAG,EAAE,CAE5F;KAEDpM,eAAK,CAAC/G,IAAI,CAACiT,mBAAmB,EAAE,OAAO,EAAE,MAAM;OAC9C,IAAI,CAACT,oBAAoB,CAACC,YAAY,CAAC;MACvC,CAAC;KAEFtN,aAAG,CAACC,MAAM,CAAC6N,mBAAmB,EAAEhO,SAAS,CAAC;IAC1C,CAAC;GAEF,OAAOA,SAAS;CACjB;AAGD,OAAamO,gBAAgB,GAAG,IAAIhB,gBAAgB,EAAE;;OCnFhDiB,QAAQ,GAAG,IAAI1J,YAAY,EAAE;AACnC;CAUA;CACA;CACA;CACA;CACA1L,MAAM,CAACqV,eAAe,GAAGvZ,sBAAsB;;CAE/C;CACA;CACA;CACAkE,MAAM,CAACsV,GAAG,GAAG;;CAEb;CACA;GACCC,gBAAgB,EAAE;KACjB5W,IAAI,CAAC6W,OAAO,EAAEC,KAAK,EAAE1X,OAAO,EAAE2X,cAAc,EAC5C;OACC,MAAMC,gBAAgB,GAAGrU,oBAAU,CAACC,QAAQ,CAAC,8BAA8B,CAAC;OAC5E,IAAIoU,gBAAgB,EACpB;SACCA,gBAAgB,CAAChX,IAAI,CAAC6W,OAAO,EAAEC,KAAK,EAAE1X,OAAO,EAAE2X,cAAc,CAAC;;;IAGhE;;CAGF;CACA;GACCE,cAAc,CAAC/R,QAAQ,EAAEgS,IAAI,EAC7B;KACC,MAAMC,QAAQ,GAAGxU,oBAAU,CAACC,QAAQ,CAAC,sBAAsB,CAAC;KAC5D,IAAIuU,QAAQ,EACZ;OACCA,QAAQ,CAACF,cAAc,CAAC/R,QAAQ,EAAEgS,IAAI,CAAC;;;CAG1C,CAAC;;;;;;;;;;;;;;"}