this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,s,t,a,i,l,r,o,n,d,c,b,v,p){"use strict";async function u(e){p.Loc.setMessage(e.messages);await h({...e,titleBar:p.Loc.getMessage("BX24_PARTNER_TITLE"),sendButtonText:p.Loc.getMessage("BX24_BUTTON_SEND")})}async function h(e){const s=e.titleBar;const t=e.sendButtonText;const a=e.partnerName;const i=e.partnerUrl;const[{Popup:l},{Button:r,ButtonColor:o}]=await Promise.all([p.Runtime.loadExtension("main.popup"),p.Runtime.loadExtension("ui.buttons")]);const n={className:"bitrix24-partner__popup",autoHide:false,cacheable:false,zIndex:0,offsetLeft:0,offsetTop:0,width:540,height:350,overlay:true,draggable:{restrict:true},closeByEsc:true,titleBar:s,closeIcon:true,content:`\n\t\t\t<div class="bitrix24-partner__popup-content">\n\t\t\t\t<div class="bitrix24-partner__popup-content_title">${p.Loc.getMessage("PARTNER_TITLE_FOR_NAME")}</div>\n\t\t\t\t<div class="bitrix24-partner__popup-content_main">\n\t\t\t\t\t<div class="bitrix24-partner__popup-content_name">${a}</div>\n\t\t\t\t\t<a class="bitrix24-partner__popup-content_link" href="${encodeURI(i)}" target="_blank">${p.Loc.getMessage("PARTNER_LINK_NAME_MORE")}</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="bitrix24-partner__popup-content_desc">${p.Loc.getMessage("PARTNER_POPUP_DESCRIPTION_BOTTOM")}</div>\n\t\t\t</div>\n\t\t`,buttons:[new r({color:o.SUCCESS,text:t,onclick:async e=>{setTimeout((()=>{e.setClocking(true)}),200);await _();e.setClocking(false)}})]};const d=new l(n);d.show()}async function _(){const{Form:e}=await p.Runtime.loadExtension("ui.feedback.form");e.open({id:`intranet-license-partner-form-${parseInt(Math.random()*1e3,10)}`,portalUri:"https://bitrix24.team",forms:[{zones:["de"],id:883,lang:"de",sec:"a12ty8"},{zones:["com","in","eu","uk"],id:735,lang:"en",sec:"vlhmlv"},{zones:["es","co","mx"],id:900,lang:"es",sec:"w3qmwq"},{zones:["com.br"],id:901,lang:"pt",sec:"prnm4x"},{zones:["cn/tc"],id:902,lang:"cn-tc",sec:"z8isyg"},{zones:["cn"],id:903,lang:"cn-sc",sec:"hsxnam"},{zones:["pl"],id:904,lang:"pl",sec:"2ph9ph"},{zones:["it"],id:905,lang:"it",sec:"2r3owa"},{zones:["fr"],id:906,lang:"fr",sec:"jt2fii"},{zones:["com.tr"],id:907,lang:"tr",sec:"ovevp8"},{zones:["id"],id:908,lang:"id",sec:"7kq7v2"},{zones:["com/my"],id:909,lang:"ms",sec:"kmncmj"},{zones:["com/th"],id:910,lang:"th",sec:"sknbp9"},{zones:["vn"],id:911,lang:"vn",sec:"a573fy"},{zones:["jp"],id:912,lang:"jp",sec:"3purdq"},{zones:["ru"],id:2122,lang:"ru",sec:"8vralr"},{zones:["kz"],id:2128,lang:"ru",sec:"054phh"},{zones:["by"],id:2129,lang:"ru",sec:"srs85j"}],defaultForm:{id:735,lang:"en",sec:"vlhmlv"}})}async function P(e){if(p.Type.isObject(e)===false){return}const{Popup:s}=await p.Runtime.loadExtension("main.popup");const t={id:"B24PartnerOrderForm",autoHide:true,noAllPaddings:true,zIndex:0,offsetLeft:0,offsetTop:0,overlay:true,borderRadius:"10px",contentBorderRadius:"10px",disableScroll:true,height:Math.min(window.innerHeight-60,758),width:560,draggable:{restrict:true},closeByEsc:true,contentColor:"white",contentNoPaddings:true,cacheable:false,content:`\n\t\t\t<script data-b24-form="inline/${e.id}/${e.sec}" data-skip-moving="true">\n\t\t\t\t(function(w, d,u) {\n\t\t\t\t\tvar s = d.createElement("script");\n\t\t\t\t\ts.async=true;\n\t\t\t\t\ts.src=u + "?" + (Date.now()/180000|0);\n\t\t\t\t\tvar h = d.getElementsByTagName("script")[0];\n\t\t\t\t\th.parentNode.insertBefore(s,h);\n\t\t\t\t})(window,document,"https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.sec}.js")\n\t\t\t<\/script>\n\t\t`,events:{onPopupFirstShow(){(function(e,s,t){var a=s.createElement("script");a.async=true;a.src=t+"?"+(Date.now()/18e4|0);var i=s.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)})(window,document,`https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.sec}.js`)}}};const a=new s(t);a.show()}const f=async()=>{await p.Runtime.loadExtension("helper");const e=p.Reflection.getClass("BX.Helper");e.show("redirect=detail&code=20267044")};class m{static async showConnectForm(e){return u(e)}static showIntegrationOrderForm(e){return P(e)}static async showHelper(){return f()}}var L=babelHelpers.classPrivateFieldLooseKey("handleChatMenuSelect");var F=babelHelpers.classPrivateFieldLooseKey("handleImLayoutChange");var B=babelHelpers.classPrivateFieldLooseKey("handleCounterUpdate");class g{constructor(){Object.defineProperty(this,B,{value:w});Object.defineProperty(this,F,{value:y});Object.defineProperty(this,L,{value:H});d.EventEmitter.subscribe("IM.Layout:onLayoutChange",babelHelpers.classPrivateFieldLooseBase(this,F)[F].bind(this));d.EventEmitter.subscribe("IM.Counters:onUpdate",babelHelpers.classPrivateFieldLooseBase(this,B)[B].bind(this));d.EventEmitter.subscribe("BX.Intranet.Bitrix24.ChatMenu:onSelect",babelHelpers.classPrivateFieldLooseBase(this,L)[L].bind(this))}getChatMenu(){const e=p.Reflection.getClass("BX.Main.interfaceButtonsManager");if(e){return e.getById("chat-menu")||null}return null}getCollaborationMenu(){const e=p.Reflection.getClass("BX.Main.interfaceButtonsManager");if(e){return e.getById("top_menu_id_collaboration")||null}return null}}function H(e){var s;const t=e.getData();const{id:a,entityId:i}=t;let l=(s=t.event)==null?void 0:s.target;if(l){l=l.closest(".main-buttons-item-link, .menu-popup-item")}const r=p.Reflection.getClass("BX.Messenger.Public");r==null?void 0:r.openNavigationItem({id:a,entityId:i,target:l})}function y(e){const s=e.getData();let t=s.from.name.toLowerCase();if(t==="market"&&s.from.entityId){t=`${t}_${s.from.entityId}`}let a=s.to.name.toLowerCase();if(a==="market"&&s.to.entityId){a=`${a}_${s.to.entityId}`}const i=this.getChatMenu();if(i!==null){i.unsetActive(t);i.setActive(a);i.reset()}const l=this.getCollaborationMenu();const r=p.Loc.getMessage("SITE_DIR")||"/";const o=window.location.pathname.toString().startsWith(`${r}online/`);if(l!==null){if(o){l.unsetActive(t);l.setActive(a)}l.reset()}}function w(e){const s=e.getData();const t=[this.getChatMenu(),this.getCollaborationMenu()];for(const e of t){if(e===null){continue}for(const[t,a]of Object.entries(s)){e.updateCounter(t,a)}}}function k(){const e=window.location.pathname;const s=C(["logout","login","back_url_pub","user_lang"]);return e+(s.length>0?`?${s}`:"")}function C(e){const s=window.location.search.slice(1);if(!p.Type.isStringFilled(s)){return""}const t=s.split("&");const a=p.Type.isArray(e)?e:[];let i="";for(const e of t){const s=e.split("=");const t=e.indexOf("=");const l=s[0];const r=p.Type.isStringFilled(s[1])?s[1]:false;if(!a.includes(l)){if(i!==""){i+="&"}i+=l+(t===-1?"":"=")+(r===false?"":r)}}return i}let E=e=>e,O,j,I,x;var T=babelHelpers.classPrivateFieldLooseKey("refs");var K=babelHelpers.classPrivateFieldLooseKey("showLoader");var S=babelHelpers.classPrivateFieldLooseKey("getPageSkeleton");var R=babelHelpers.classPrivateFieldLooseKey("bindEvents");class A{constructor(){Object.defineProperty(this,R,{value:W});Object.defineProperty(this,S,{value:M});Object.defineProperty(this,K,{value:D});Object.defineProperty(this,T,{writable:true,value:new n.MemoryCache});if(this.isEnabled()){babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}}isEnabled(){return!p.Type.isUndefined(window.frameRequestStart)}isReady(){var e,s;return((e=window.BX)==null?void 0:(s=e.frameCache)==null?void 0:s.frameDataInserted)===true||!p.Type.isUndefined(window.frameRequestFail)}showLoader(){const e=window.location.pathname;if(e==="/stream/"||e==="/stream/index.php"||e==="/index.php"){babelHelpers.classPrivateFieldLooseBase(this,K)[K]("stream")}else{setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,K)[K]()}),500)}}getStubContainer(){return document.querySelector("#page-area")}getLoaderContainer(){return babelHelpers.classPrivateFieldLooseBase(this,T)[T].remember("loader",(()=>p.Tag.render(O||(O=E`
				<div class="composite-skeleton-container">
					<div class="composite-loader-container">
						<svg class="composite-loader-circular" viewBox="25 25 50 50">
							<circle class="composite-loader-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10" />
						</svg>
					</div>
				</div>
			`))))}getLiveFeedSkeleton(){return babelHelpers.classPrivateFieldLooseBase(this,T)[T].remember("feed-skeleton",(()=>p.Tag.render(j||(j=E`
				<div class="page top-menu-mode start-page no-background no-all-paddings no-page-header">
					<div class="page__workarea">
						<div class="page__sidebar">${0}</div>
						<main class="page__workarea-content">${0}</main>
					</div>
				</div>
			`),this.getLiveFeedSidebar(),this.getLiveFeedWorkArea())))}getLiveFeedSidebar(){return babelHelpers.classPrivateFieldLooseBase(this,T)[T].remember("feed-sidebar",(()=>p.Tag.render(I||(I=E`
				<div class="skeleton__white-bg-element skeleton__sidebar skeleton__intranet-ustat">
					<div class="skeleton__graph-circle"></div>
					<div class="skeleton__graph-right">
						<div class="skeleton__graph-right_top">
							<div class="skeleton__graph-right_top-circle --first"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
							<div class="skeleton__graph-right_top-circle"></div>
						</div>
						<div class="skeleton__graph-right_bottom">
							<div class="skeleton__graph-right_bottom-line"></div>
							<div class="skeleton__graph-right_bottom-line"></div>
						</div>
					</div>
				</div>
				
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
						<div class="skeleton__sidebar-header_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
					<div class="skeleton__tasks-row">
						<div class="skeleton__tasks-row_line"></div>
						<div class="skeleton__tasks-row_short-line"></div>
						<div class="skeleton__tasks-row_circle"></div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__sidebar">
					<div class="skeleton__sidebar-header">
						<div class="skeleton__sidebar-header_line"></div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
					<div class="skeleton__birthdays-row">
						<div class="skeleton__birthdays-circle"></div>
						<div class="skeleton__birthdays-info">
							<div class="skeleton__birthdays-name"></div>
							<div class="skeleton__birthdays-date"></div>
						</div>
					</div>
				</div>
			`))))}getLiveFeedWorkArea(){return babelHelpers.classPrivateFieldLooseBase(this,T)[T].remember("feed-work-area",(()=>p.Tag.render(x||(x=E`
				<div class="skeleton__white-bg-element skeleton__feed-wrap">
					<div class="skeleton__feed-wrap_header">
						<div class="skeleton__feed-wrap_header-link --long"></div>
						<div class="skeleton__feed-wrap_header-link --one"></div>
						<div class="skeleton__feed-wrap_header-link --two"></div>
						<div class="skeleton__feed-wrap_header-link --one"></div>
						<div class="skeleton__feed-wrap_header-link --two"></div>
					</div>
					<div class="skeleton__feed-wrap_header-content">
						<div class="skeleton__feed-wrap_header-text"></div>
					</div>
				</div>
				<div class="skeleton__title-block">
					<div class="skeleton__title-block_text"></div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="skeleton__white-bg-element skeleton__feed-item">
					<div class="skeleton__feed-item_user-icon"></div>
					<div class="skeleton__feed-item_content">
						<div class="skeleton__feed-item_main">
							<div class="skeleton__feed-item_text --name"></div>
							<div class="skeleton__feed-item_date"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text"></div>
							<div class="skeleton__feed-item_text --short"></div>
						</div>
						<div class="skeleton__feed-item_nav">
							<div class="skeleton__feed-item_nav-line --one"></div>
							<div class="skeleton__feed-item_nav-line --two"></div>
							<div class="skeleton__feed-item_nav-line --three"></div>
							<div class="skeleton__feed-item_nav-line --four"></div>
						</div>
						<div class="skeleton__feed-item_like">
							<div class="skeleton__feed-item_like-icon"></div>
							<div class="skeleton__feed-item_like-name"></div>
						</div>
						<div class="skeleton__feed-item_comment">
							<div class="skeleton__feed-item_comment-icon"></div>
							<div class="skeleton__feed-item_comment-block">
								<div class="skeleton__feed-item_comment-text"></div>
							</div>
						</div>
					</div>
				</div>
			`))))}}function D(e=null){if(this.isReady()){return}const s=babelHelpers.classPrivateFieldLooseBase(this,S)[S](e);const t=this.getStubContainer();const a=s!=null?s:this.getLoaderContainer();if(!t||a.parentNode){return}p.Dom.append(a,t)}function M(e){const s={stream:()=>this.getLiveFeedSkeleton()};if(s[e]){return s[e]()}return null}function W(){d.EventEmitter.subscribe("onFrameDataRequestFail",(()=>{console.error("Composite ajax request failed");top.location=`/auth/?backurl=${encodeURIComponent(k())}`}));d.EventEmitter.subscribe("onAjaxFailure",(e=>{const[s,t]=e.getCompatData();const a=`/auth/?backurl=${k()}`;if(this.isEnabled()&&(s==="auth"||s==="status"&&t===401)){console.error("Auth ajax request failed",s,t);top.location=a}}));if(o.PULL){o.PULL.subscribe({moduleId:"main",command:"composite-cache-up",callback:()=>{setTimeout((()=>{const e=BX.localStorage.get("ajax-composite-cache-up-lock");if(!e){BX.localStorage.set("ajax-composite-cache-up-lock","EXECUTE",2);p.ajax({url:"/blank.php",method:"GET",processData:false,skipBxHeader:true,emulateOnload:false})}}),Math.floor(Math.random()*500))}})}}var N=babelHelpers.classPrivateFieldLooseKey("isTransparentMode");var X=babelHelpers.classPrivateFieldLooseKey("isScrollMode");var $=babelHelpers.classPrivateFieldLooseKey("scrollModeThreshold");var U=babelHelpers.classPrivateFieldLooseKey("goTopButton");class z{constructor(e){Object.defineProperty(this,N,{writable:true,value:false});Object.defineProperty(this,X,{writable:true,value:false});Object.defineProperty(this,$,{writable:true,value:window.innerHeight});Object.defineProperty(this,U,{writable:true,value:void 0});const s=this.redraw.bind(this);p.Event.bind(window,"scroll",s,{passive:true});p.Event.bind(window,"resize",s);babelHelpers.classPrivateFieldLooseBase(this,$)[$]=window.innerHeight;babelHelpers.classPrivateFieldLooseBase(this,U)[U]=e.goTopButton;babelHelpers.classPrivateFieldLooseBase(this,U)[U].subscribe("show",(()=>{p.Dom.addClass(this.getContainer(),"--show-scroll-btn")}));babelHelpers.classPrivateFieldLooseBase(this,U)[U].subscribe("hide",(()=>{p.Dom.removeClass(this.getContainer(),"--show-scroll-btn")}));p.Event.ready((()=>{this.redraw()}))}redraw(){const e=this.getContainer();babelHelpers.classPrivateFieldLooseBase(this,$)[$]=window.innerHeight;if(window.pageYOffset>babelHelpers.classPrivateFieldLooseBase(this,$)[$]){if(!babelHelpers.classPrivateFieldLooseBase(this,X)[X]){p.Dom.addClass(e,"--scroll-mode");babelHelpers.classPrivateFieldLooseBase(this,X)[X]=true}}else if(babelHelpers.classPrivateFieldLooseBase(this,X)[X]){p.Dom.removeClass(e,"--scroll-mode");babelHelpers.classPrivateFieldLooseBase(this,X)[X]=false}if(!e||e.dataset.lockRedraw==="true"){return}const s=document.documentElement.scrollWidth-document.documentElement.clientWidth;if(s>0){if(!babelHelpers.classPrivateFieldLooseBase(this,N)[N]){p.Dom.addClass(e,"--transparent");babelHelpers.classPrivateFieldLooseBase(this,N)[N]=true}}else if(babelHelpers.classPrivateFieldLooseBase(this,N)[N]){p.Dom.removeClass(e,"--transparent");babelHelpers.classPrivateFieldLooseBase(this,N)[N]=false}}getContainer(){return document.getElementById("right-bar")}}class q{getContainer(){return document.getElementById("header")}}class G{constructor(){d.EventEmitter.subscribe("Kanban.Grid:onFixedModeStart",(()=>{this.hide()}))}show(){p.Dom.removeClass(this.getContainer(),"hidden")}hide(){p.Dom.addClass(this.getContainer(),"hidden")}getContainer(){return document.getElementById("air-footer")}}var Y=babelHelpers.classPrivateFieldLooseKey("lastScrollOffset");var V=babelHelpers.classPrivateFieldLooseKey("isReversed");var J=babelHelpers.classPrivateFieldLooseKey("button");var Q=babelHelpers.classPrivateFieldLooseKey("show");var Z=babelHelpers.classPrivateFieldLooseKey("hide");var ee=babelHelpers.classPrivateFieldLooseKey("getButtonWrapper");var se=babelHelpers.classPrivateFieldLooseKey("bindEvents");var te=babelHelpers.classPrivateFieldLooseKey("handleScroll");var ae=babelHelpers.classPrivateFieldLooseKey("handleButtonClick");var ie=babelHelpers.classPrivateFieldLooseKey("setReversed");var le=babelHelpers.classPrivateFieldLooseKey("getButton");class re extends d.EventEmitter{constructor(){super();Object.defineProperty(this,le,{value:ue});Object.defineProperty(this,ie,{value:pe});Object.defineProperty(this,ae,{value:ve});Object.defineProperty(this,te,{value:be});Object.defineProperty(this,se,{value:ce});Object.defineProperty(this,ee,{value:de});Object.defineProperty(this,Z,{value:ne});Object.defineProperty(this,Q,{value:oe});Object.defineProperty(this,Y,{writable:true,value:0});Object.defineProperty(this,V,{writable:true,value:false});Object.defineProperty(this,J,{writable:true,value:void 0});this.setEventNamespace("GoTopButton");babelHelpers.classPrivateFieldLooseBase(this,se)[se]()}isShown(){return p.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee](),"--show")}}function oe(){this.emit("show");p.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee](),"--show")}function ne(){this.emit("hide");p.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee](),"--show")}function de(){return document.getElementById("goTopButtonWrapper")}function ce(){p.Event.ready((()=>{babelHelpers.classPrivateFieldLooseBase(this,te)[te]();p.Event.bind(window,"scroll",(()=>{babelHelpers.classPrivateFieldLooseBase(this,te)[te]()}));p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee](),"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]()}))}))}function be(){if(window.pageYOffset>document.documentElement.clientHeight){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]();if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]){babelHelpers.classPrivateFieldLooseBase(this,ie)[ie](false);babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=0}}else if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]===false){babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]()}}function ve(){if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]){babelHelpers.classPrivateFieldLooseBase(this,ie)[ie](false);window.scrollTo({top:babelHelpers.classPrivateFieldLooseBase(this,Y)[Y],behavior:"instant"});babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=0}else{babelHelpers.classPrivateFieldLooseBase(this,ie)[ie](true);babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=window.pageYOffset;window.scrollTo({top:0,behavior:"instant"})}}function pe(e=true){babelHelpers.classPrivateFieldLooseBase(this,V)[V]=e;if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]){babelHelpers.classPrivateFieldLooseBase(this,le)[le]().setIcon(s.ButtonIcon.ANGLE_DOWN)}else{babelHelpers.classPrivateFieldLooseBase(this,le)[le]().setIcon(s.ButtonIcon.ANGLE_UP)}}function ue(){return babelHelpers.classPrivateFieldLooseBase(this,J)[J]||s.ButtonManager.createFromNode(document.getElementById("goTopButton"))}var he=babelHelpers.classPrivateFieldLooseKey("handleCounterUpdate");var _e=babelHelpers.classPrivateFieldLooseKey("handleLiveFeedCounterDecrement");class Pe{constructor(){Object.defineProperty(this,_e,{value:me});Object.defineProperty(this,he,{value:fe});d.EventEmitter.subscribe("onImUpdateCounterMessage",babelHelpers.classPrivateFieldLooseBase(this,he)[he].bind(this));d.EventEmitter.subscribe("onCounterDecrement",babelHelpers.classPrivateFieldLooseBase(this,_e)[_e].bind(this))}getMenu(){const e=p.Reflection.getClass("BX.Main.interfaceButtonsManager");if(e){return e.getById("top_menu_id_collaboration")}return null}}function fe(e){const s=this.getMenu();const[t]=e.getCompatData();s==null?void 0:s.updateCounter("im-message",t)}function me(e){const[s]=e.getCompatData();const t=this.getMenu();if(t){const e=t.getItemById("menu_live_feed");if(e){const a=t.getItemData(e);const{COUNTER:i,COUNTER_ID:l}=a;t==null?void 0:t.updateCounter(l,Math.max(0,i-s))}}}var Le=babelHelpers.classPrivateFieldLooseKey("rightBar");var Fe=babelHelpers.classPrivateFieldLooseKey("header");var Be=babelHelpers.classPrivateFieldLooseKey("footer");var ge=babelHelpers.classPrivateFieldLooseKey("composite");var He=babelHelpers.classPrivateFieldLooseKey("chatMenu");var ye=babelHelpers.classPrivateFieldLooseKey("goTopButton");var we=babelHelpers.classPrivateFieldLooseKey("collaborationMenu");var ke=babelHelpers.classPrivateFieldLooseKey("patchPopupMenu");var Ce=babelHelpers.classPrivateFieldLooseKey("patchJSClock");var Ee=babelHelpers.classPrivateFieldLooseKey("preventFromIframe");var Oe=babelHelpers.classPrivateFieldLooseKey("applyUserAgentRules");var je=babelHelpers.classPrivateFieldLooseKey("patchRestAPI");class Ie{constructor(){Object.defineProperty(this,je,{value:Re});Object.defineProperty(this,Oe,{value:Se});Object.defineProperty(this,Ee,{value:Ke});Object.defineProperty(this,Ce,{value:Te});Object.defineProperty(this,ke,{value:xe});Object.defineProperty(this,Le,{writable:true,value:null});Object.defineProperty(this,Fe,{writable:true,value:null});Object.defineProperty(this,Be,{writable:true,value:null});Object.defineProperty(this,ge,{writable:true,value:null});Object.defineProperty(this,He,{writable:true,value:null});Object.defineProperty(this,ye,{writable:true,value:null});Object.defineProperty(this,we,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee]();babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]();babelHelpers.classPrivateFieldLooseBase(this,je)[je]();babelHelpers.classPrivateFieldLooseBase(this,Ce)[Ce]();babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]=new re;babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]=new z({goTopButton:babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]});babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]=new q;babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]=new G;babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]=new A;babelHelpers.classPrivateFieldLooseBase(this,He)[He]=new g;babelHelpers.classPrivateFieldLooseBase(this,we)[we]=new Pe;babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]()}getRightBar(){return babelHelpers.classPrivateFieldLooseBase(this,Le)[Le]}getHeader(){return babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe]}getFooter(){return babelHelpers.classPrivateFieldLooseBase(this,Be)[Be]}getComposite(){return babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]}getChatMenu(){return babelHelpers.classPrivateFieldLooseBase(this,He)[He]}getCollaborationMenu(){return babelHelpers.classPrivateFieldLooseBase(this,we)[we]}}function xe(){d.EventEmitter.subscribe("BX.Main.Menu:onInit",(e=>{const{params:s}=e.getData();if(s&&p.Type.isNumber(s.maxWidth)){s.maxWidth+=10}}))}function Te(){d.EventEmitter.subscribe("onJCClockInit",(e=>{window.JCClock.setOptions({centerXInline:83,centerX:83,centerYInline:67,centerY:79,minuteLength:31,hourLength:26,popupHeight:229,inaccuracy:15,cancelCheckClick:true})}))}function Ke(){const e=window!==window.top;if(e){window.top.location=window.location.href}}function Se(){if(!p.Browser.isMobile()&&document.referrer!==""&&document.referrer.startsWith(location.origin)===false){p.Runtime.loadExtension("intranet.recognize-links")}}function Re(){const e=p.Reflection.getClass("BX.rest.AppLayout");if(!e){return}const s=e.initializePlacement("DEFAULT");s.prototype.showHelper=async function(e,s){let t="";if(p.Type.isNumber(e)){t=`redirect=detail&code=${e}`}else if(p.Type.isStringFilled(e)){t=e}else if(p.Type.isPlainObject(e)){for(const s of Object.keys(e)){if(t.length>0){t+="&"}t+=`${s}=${e[s]}`}}if(t.length>0){await p.Runtime.loadExtension("helper");const e=p.Reflection.getClass("BX.Helper");e.show(t)}}}var Ae=babelHelpers.classPrivateFieldLooseKey("searchOptions");var De=babelHelpers.classPrivateFieldLooseKey("extensionLoaded");var Me=babelHelpers.classPrivateFieldLooseKey("container");var We=babelHelpers.classPrivateFieldLooseKey("button");var Ne=babelHelpers.classPrivateFieldLooseKey("input");var Xe=babelHelpers.classPrivateFieldLooseKey("searchTitleInstance");var $e=babelHelpers.classPrivateFieldLooseKey("handleButtonClick");var Ue=babelHelpers.classPrivateFieldLooseKey("handleInputFocusOut");class ze{constructor(e){Object.defineProperty(this,Ue,{value:Ge});Object.defineProperty(this,$e,{value:qe});Object.defineProperty(this,Ae,{writable:true,value:{}});Object.defineProperty(this,De,{writable:true,value:false});Object.defineProperty(this,Me,{writable:true,value:null});Object.defineProperty(this,We,{writable:true,value:null});Object.defineProperty(this,Ne,{writable:true,value:null});Object.defineProperty(this,Xe,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,Me)[Me]=document.getElementById(e.containerId);babelHelpers.classPrivateFieldLooseBase(this,We)[We]=document.getElementById(e.buttonId);babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne]=document.getElementById(e.inputId);babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae]=e.searchOptions;p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,We)[We],"click",babelHelpers.classPrivateFieldLooseBase(this,$e)[$e].bind(this));p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne],"focusout",babelHelpers.classPrivateFieldLooseBase(this,Ue)[Ue].bind(this))}open(){p.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Me)[Me],"--active");babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne].disabled=false;setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne].focus()}),200)}close(){p.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Me)[Me],"--active");babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne].disabled=true;if(babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]!==null){babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe].clearSearch();babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe].closeResult()}}}function qe(){if(p.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,Me)[Me],"--active")){this.close()}else{this.open()}if(babelHelpers.classPrivateFieldLooseBase(this,De)[De]){return}babelHelpers.classPrivateFieldLooseBase(this,De)[De]=true;p.Runtime.loadExtension("intranet.search_title").then((()=>{const e=p.Reflection.getClass("BX.Intranet.SearchTitle");babelHelpers.classPrivateFieldLooseBase(this,Xe)[Xe]=new e(babelHelpers.classPrivateFieldLooseBase(this,Ae)[Ae])})).catch((e=>{console.error(e)}))}function Ge(e){if(!p.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,Ne)[Ne].value)&&e.relatedTarget!==babelHelpers.classPrivateFieldLooseBase(this,We)[We]){this.close()}}var Ye=babelHelpers.classPrivateFieldLooseKey("avatarWrapper");var Ve=babelHelpers.classPrivateFieldLooseKey("cache");var Je=babelHelpers.classPrivateFieldLooseKey("options");var Qe=babelHelpers.classPrivateFieldLooseKey("setHiddenAvatar");var Ze=babelHelpers.classPrivateFieldLooseKey("setVisibleAvatar");var es=babelHelpers.classPrivateFieldLooseKey("showWidget");var ss=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var ts=babelHelpers.classPrivateFieldLooseKey("getContent");var as=babelHelpers.classPrivateFieldLooseKey("showCounter");var is=babelHelpers.classPrivateFieldLooseKey("showWorkTimeState");var ls=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var rs=babelHelpers.classPrivateFieldLooseKey("getWorkTimeStateWrapper");var os=babelHelpers.classPrivateFieldLooseKey("getCounter");var ns=babelHelpers.classPrivateFieldLooseKey("getWorkTimeState");var ds=babelHelpers.classPrivateFieldLooseKey("setEventHandlerForUpdateCounter");var cs=babelHelpers.classPrivateFieldLooseKey("setEventHandlerForChangeAvatar");class bs{static init(e){babelHelpers.classPrivateFieldLooseBase(this,Je)[Je]=e;babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]=document.querySelector('[data-id="bx-avatar-widget"]');babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]();if(babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].signDocumentsCounter>0){babelHelpers.classPrivateFieldLooseBase(this,as)[as]();babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]()}if(babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].workTimeAvailable){babelHelpers.classPrivateFieldLooseBase(this,is)[is]()}p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye],"click",(()=>{p.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye]);babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]().getPopup().setFixed(true);babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]().createSkeletonFromConfig(e.skeleton).show();babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]();babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]().getPopup().subscribe("onClose",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ze)[Ze]()}));babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]().getPopup().subscribe("onShow",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Qe)[Qe]()}));p.Runtime.loadExtension(["intranet.avatar-widget"]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,es)[es]()})).catch((()=>{}))}))}}function vs(){p.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye],"opacity","0")}function ps(){p.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye],"opacity","1")}function us(){babelHelpers.classPrivateFieldLooseBase(this,ts)[ts]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]().clearBeforeInsertContent();t.AvatarWidget.getInstance().setOptions({buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye],loader:babelHelpers.classPrivateFieldLooseBase(this,ss)[ss]().getPopup(),data:e.data}).show();p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye],"click",(()=>{t.AvatarWidget.getInstance().show()}))})).catch((()=>{}))}function hs(){return babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].remember("widgetLoader",(()=>new c.WidgetLoader({id:"bx-avatar-header-popup",bindElement:babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye],className:"intranet-avatar-widget-base-popup",width:450,useAngle:false,fixed:true,offsetTop:-50,offsetLeft:-392})))}function _s(){return babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].remember("content",(()=>new Promise(((e,s)=>{p.ajax.runAction("intranet.user.widget.getContent").then((s=>e(s))).catch((e=>s(e)))}))))}function Ps(){babelHelpers.classPrivateFieldLooseBase(this,os)[os]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,ls)[ls]())}function fs(){babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]())}function ms(){return babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].remember("counterWrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye].querySelector(".air-user-profile-avatar__counter")))}function Ls(){return babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].remember("workTimeStateWrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye].querySelector(".air-user-profile-avatar__work-time-state")))}function Fs(){return babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].remember("counter",(()=>new v.Counter({color:v.Counter.Color.DANGER,size:v.Counter.Size.MEDIUM,value:babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].signDocumentsCounter,useAirDesign:true,style:v.CounterStyle.FILLED_ALERT})))}function Bs(){return babelHelpers.classPrivateFieldLooseBase(this,Ve)[Ve].remember("workTimeState",(()=>new a.WorkTimeStateIcon({state:babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].workTimeState,action:babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].workTimeAction})))}function gs(){o.PULL.subscribe({moduleId:"sign",command:babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].signDocumentsPullEventName,callback:e=>{if(!p.Type.isNumber(e==null?void 0:e.needActionCount)){return}if((e==null?void 0:e.needActionCount)>0){babelHelpers.classPrivateFieldLooseBase(this,os)[os]().update(e.needActionCount)}else{babelHelpers.classPrivateFieldLooseBase(this,os)[os]().destroy()}}})}function Hs(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ye)[Ye].querySelector("i");d.EventEmitter.subscribe("BX.Intranet.UserProfile:Avatar:changed",(s=>{const t=s.getData()[0];const a=t&&t.url?t.url:"";const i=t&&t.userId?t.userId:0;if(babelHelpers.classPrivateFieldLooseBase(this,Je)[Je].userId===i&&e){e.style=p.Type.isStringFilled(a)?`background-size: cover; background-image: url('${encodeURI(a)}')`:""}}))}Object.defineProperty(bs,cs,{value:Hs});Object.defineProperty(bs,ds,{value:gs});Object.defineProperty(bs,ns,{value:Bs});Object.defineProperty(bs,os,{value:Fs});Object.defineProperty(bs,rs,{value:Ls});Object.defineProperty(bs,ls,{value:ms});Object.defineProperty(bs,is,{value:fs});Object.defineProperty(bs,as,{value:Ps});Object.defineProperty(bs,ts,{value:_s});Object.defineProperty(bs,ss,{value:hs});Object.defineProperty(bs,es,{value:us});Object.defineProperty(bs,Ze,{value:ps});Object.defineProperty(bs,Qe,{value:vs});Object.defineProperty(bs,Ye,{writable:true,value:void 0});Object.defineProperty(bs,Ve,{writable:true,value:new n.MemoryCache});Object.defineProperty(bs,Je,{writable:true,value:void 0});var ys=babelHelpers.classPrivateFieldLooseKey("options");var ws=babelHelpers.classPrivateFieldLooseKey("buttonWrapper");var ks=babelHelpers.classPrivateFieldLooseKey("cache");var Cs=babelHelpers.classPrivateFieldLooseKey("getExtensionWidgetName");var Es=babelHelpers.classPrivateFieldLooseKey("showWidget");var Os=babelHelpers.classPrivateFieldLooseKey("getWidget");var js=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var Is=babelHelpers.classPrivateFieldLooseKey("getContent");var xs=babelHelpers.classPrivateFieldLooseKey("getCounter");var Ts=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var Ks=babelHelpers.classPrivateFieldLooseKey("setCounterValue");var Ss=babelHelpers.classPrivateFieldLooseKey("setEventHandlers");var Rs=babelHelpers.classPrivateFieldLooseKey("showInfrastructureSlider");class As{static init(e){babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]=e;babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]=document.querySelector('[data-id="licenseWidgetWrapper"]');babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]();if(babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].ordersAwaitingPayment>0){babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks](babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].ordersAwaitingPayment)}p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ws)[ws],"click",(()=>{p.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]);babelHelpers.classPrivateFieldLooseBase(this,js)[js]().createSkeletonFromConfig(e.skeleton).show();p.Runtime.loadExtension([babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs]()]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]()})).catch((()=>{}))}))}}function Ds(){if(babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isCloud){return"bitrix24.license-widget"}return"intranet.license-widget"}function Ms(){babelHelpers.classPrivateFieldLooseBase(this,Is)[Is]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,js)[js]().clearBeforeInsertContent();let s=null;if(babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isCloud){s=e.data;s.loader=babelHelpers.classPrivateFieldLooseBase(this,js)[js]().getPopup();s.wrapper=babelHelpers.classPrivateFieldLooseBase(this,ws)[ws]}else{s={loader:babelHelpers.classPrivateFieldLooseBase(this,js)[js]().getPopup(),buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,ws)[ws],data:e.data}}babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]().setOptions(s).show();p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ws)[ws],"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Os)[Os]().show()}))})).catch((()=>{}))}function Ws(){return babelHelpers.classPrivateFieldLooseBase(this,ks)[ks].remember("widget",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isCloud){return i.LicenseWidget.getInstance()}return l.LicenseWidget.getInstance()}))}function Ns(){return babelHelpers.classPrivateFieldLooseBase(this,ks)[ks].remember("widgetLoader",(()=>new c.WidgetLoader({bindElement:babelHelpers.classPrivateFieldLooseBase(this,ws)[ws],width:374,id:"bx-license-header-popup"})))}function Xs(){return babelHelpers.classPrivateFieldLooseBase(this,ks)[ks].remember("content",(()=>new Promise(((e,s)=>{if(babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isCloud){p.ajax.runComponentAction("bitrix:bitrix24.license.widget","getData",{mode:"class"}).then((s=>e(s))).catch((e=>s(e)))}else{p.ajax.runAction("intranet.license.widget.getContent").then((s=>e(s))).catch((e=>s(e)))}}))))}function $s(){return babelHelpers.classPrivateFieldLooseBase(this,ks)[ks].remember("counter",(()=>new v.Counter({color:v.CounterColor.DANGER,useAirDesign:true,style:v.CounterStyle.FILLED_ALERT})))}function Us(){return babelHelpers.classPrivateFieldLooseBase(this,ks)[ks].remember("counter-wrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,ws)[ws].querySelector(".air-header-button__counter")))}function zs(e){if(e<1){babelHelpers.classPrivateFieldLooseBase(this,xs)[xs]().destroy();babelHelpers.classPrivateFieldLooseBase(this,ks)[ks].delete("counter")}if(e>0&&babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]()){babelHelpers.classPrivateFieldLooseBase(this,xs)[xs]().update(e);babelHelpers.classPrivateFieldLooseBase(this,xs)[xs]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts]())}}function qs(){if(babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isSidePanelDemoLicense){BX.SidePanel.Instance.bindAnchors({rules:[{condition:[/\/settings\/license_demo.php/],handler(e){r.FeaturePromotersRegistry.getPromoter({code:"limit_demo"}).show();e.stopPropagation();e.preventDefault()}}]})}if(babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isCloud&&babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].isAdmin){o.PULL.subscribe({moduleId:"bitrix24",command:"updateCountOrdersAwaitingPayment",callback:e=>{d.EventEmitter.emit("BX.Bitrix24.Orders:updateOrdersAwaitingPayment",new d.BaseEvent({data:{counter:Number(e.count)}}));if(e.count>0){babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks](Number(e.count))}}});d.EventEmitter.subscribe(d.EventEmitter.GLOBAL_TARGET,"Bitrix24InfrastructureSlider:show",babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs].bind(this))}}function Gs(){const e=babelHelpers.classPrivateFieldLooseBase(this,ys)[ys].infrastructureForm;BX.SidePanel.Instance.open("bx-infrastructure-slider",{contentCallback:()=>`<script data-b24-form="inline/${e.id}/${e.secCode}" data-skip-moving="true"><\/script>`,width:664,loader:"default-loader",cacheable:false,closeByEsc:false,data:{rightBoundary:0},events:{onOpen:()=>{(function(e,s,t){const a=s.createElement("script");a.async=true;a.src=`${t}?${Date.now()/18e4|0}`;const i=s.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)})(window,document,`https://bitrix24.team/upload/crm/form/loader_${e.id}_${e.secCode}.js`)},onOpenComplete:()=>{top.addEventListener("b24:form:send:success",(s=>{if(s.detail.object.identification.id===e.id){p.ajax.runComponentAction("bitrix:bitrix24.license.widget","setOptionWaitingInfrastructure",{mode:"class",data:{}})}}))}}})}Object.defineProperty(As,Rs,{value:Gs});Object.defineProperty(As,Ss,{value:qs});Object.defineProperty(As,Ks,{value:zs});Object.defineProperty(As,Ts,{value:Us});Object.defineProperty(As,xs,{value:$s});Object.defineProperty(As,Is,{value:Xs});Object.defineProperty(As,js,{value:Ns});Object.defineProperty(As,Os,{value:Ws});Object.defineProperty(As,Es,{value:Ms});Object.defineProperty(As,Cs,{value:Ds});Object.defineProperty(As,ys,{writable:true,value:void 0});Object.defineProperty(As,ws,{writable:true,value:void 0});Object.defineProperty(As,ks,{writable:true,value:new n.MemoryCache});var Ys=babelHelpers.classPrivateFieldLooseKey("buttonWrapper");var Vs=babelHelpers.classPrivateFieldLooseKey("cache");var Js=babelHelpers.classPrivateFieldLooseKey("options");var Qs=babelHelpers.classPrivateFieldLooseKey("showWidget");var Zs=babelHelpers.classPrivateFieldLooseKey("getWidgetLoader");var et=babelHelpers.classPrivateFieldLooseKey("getContent");var st=babelHelpers.classPrivateFieldLooseKey("setEventHandlers");var tt=babelHelpers.classPrivateFieldLooseKey("onReceiveCounterValue");var at=babelHelpers.classPrivateFieldLooseKey("getCounterWrapper");var it=babelHelpers.classPrivateFieldLooseKey("getCounter");var lt=babelHelpers.classPrivateFieldLooseKey("getCounterValue");var rt=babelHelpers.classPrivateFieldLooseKey("onFirstWatchNewStructure");class ot{static init(e){babelHelpers.classPrivateFieldLooseBase(this,Js)[Js]=e;babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys]=document.querySelector('[data-id="invitationButton"]');p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys],"click",(()=>{p.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys]);babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs]().createSkeletonFromConfig(e.skeleton).show();p.Runtime.loadExtension(["intranet.invitation-widget"]).then((()=>{babelHelpers.classPrivateFieldLooseBase(this,Qs)[Qs]()})).catch((()=>{}))}));if(babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].invitationCounter>0){babelHelpers.classPrivateFieldLooseBase(this,it)[it]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,at)[at]())}babelHelpers.classPrivateFieldLooseBase(this,st)[st]()}}function nt(){babelHelpers.classPrivateFieldLooseBase(this,et)[et]().then((e=>{babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs]().clearBeforeInsertContent();b.InvitationWidget.getInstance().setOptions({buttonWrapper:babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys],loader:babelHelpers.classPrivateFieldLooseBase(this,Zs)[Zs]().getPopup(),...e.data}).show();p.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys],"click",(()=>{b.InvitationWidget.getInstance().show()}))})).catch((()=>{}))}function dt(){return babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs].remember("widgetLoader",(()=>new c.WidgetLoader({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys],width:350,id:"bx-invitation-header-popup"})))}function ct(){return babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs].remember("content",(()=>new Promise(((e,s)=>{p.ajax.runAction("intranet.invitationwidget.getData",{data:{},analyticsLabel:{headerPopup:"Y"}}).then((s=>e(s))).catch((e=>s(e)))}))))}function bt(){d.EventEmitter.subscribeOnce("HR.company-structure:first-popup-showed",babelHelpers.classPrivateFieldLooseBase(this,rt)[rt].bind(this));d.EventEmitter.subscribe("onPullEvent-main",(e=>{const[s,t]=e.getCompatData();if(s==="user_counter"&&t[p.Loc.getMessage("SITE_ID")]){const e=t[p.Loc.getMessage("SITE_ID")][babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].counterId];if(e>0){babelHelpers.classPrivateFieldLooseBase(this,tt)[tt](e)}}}))}function vt(e){if(babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].shouldShowStructureCounter){e++}babelHelpers.classPrivateFieldLooseBase(this,it)[it]().update(e);babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].invitationCounter=e;if(e>0){babelHelpers.classPrivateFieldLooseBase(this,it)[it]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,at)[at]())}else{babelHelpers.classPrivateFieldLooseBase(this,it)[it]().destroy();babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs].delete("counter")}}function pt(){return babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs].remember("counter-wrapper",(()=>babelHelpers.classPrivateFieldLooseBase(this,Ys)[Ys].querySelector(".invitation-widget-counter")))}function ut(){return babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs].remember("counter",(()=>new v.Counter({value:babelHelpers.classPrivateFieldLooseBase(this,lt)[lt](),color:v.Counter.Color.DANGER,useAirDesign:true,style:v.CounterStyle.FILLED_ALERT})))}function ht(){var e;let s=Number(babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].invitationCounter);if((e=babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].shouldShowStructureCounter)!=null?e:false){s++}return s}function _t(){let e=babelHelpers.classPrivateFieldLooseBase(this,it)[it]().value;if(!p.Type.isNumber(e)){return}if(!babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].shouldShowStructureCounter){return}e--;babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].shouldShowStructureCounter=false;babelHelpers.classPrivateFieldLooseBase(this,it)[it]().update(e);babelHelpers.classPrivateFieldLooseBase(this,Js)[Js].invitationCounter=e;if(e>0){babelHelpers.classPrivateFieldLooseBase(this,it)[it]().renderTo(babelHelpers.classPrivateFieldLooseBase(this,at)[at]())}else{babelHelpers.classPrivateFieldLooseBase(this,it)[it]().destroy();babelHelpers.classPrivateFieldLooseBase(this,Vs)[Vs].delete("counter")}}Object.defineProperty(ot,rt,{value:_t});Object.defineProperty(ot,lt,{value:ht});Object.defineProperty(ot,it,{value:ut});Object.defineProperty(ot,at,{value:pt});Object.defineProperty(ot,tt,{value:vt});Object.defineProperty(ot,st,{value:bt});Object.defineProperty(ot,et,{value:ct});Object.defineProperty(ot,Zs,{value:dt});Object.defineProperty(ot,Qs,{value:nt});Object.defineProperty(ot,Ys,{writable:true,value:void 0});Object.defineProperty(ot,Vs,{writable:true,value:new n.MemoryCache});Object.defineProperty(ot,Js,{writable:true,value:void 0});let Pt=e=>e,ft,mt;var Lt=babelHelpers.classPrivateFieldLooseKey("popup");var Ft=babelHelpers.classPrivateFieldLooseKey("initPopup");var Bt=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");class gt{constructor(){Object.defineProperty(this,Bt,{value:yt});Object.defineProperty(this,Ft,{value:Ht});Object.defineProperty(this,Lt,{writable:true,value:void 0})}async showLanguageListPopup(e,s){if(!babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]){await babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft](e,s)}if(babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].isShown()){return}babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].show()}hideLanguageListPopup(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt])==null?void 0:e.close()}switchPortalLanguage(e){window.location.href=`/auth/?user_lang=${e}&backurl=${k()}`}}async function Ht(e,s){const t=()=>{this.hideLanguageListPopup()};const{Popup:a}=await p.Runtime.loadExtension("main.popup");const i={bindElement:e,autoHide:true,closeByEcs:true,cachable:false,content:babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt](s),events:{onPopupClose:()=>{p.Event.unbind(window,"scroll",t);babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].destroy();babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]=null}}};babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]=new a(i);p.Event.bind(window,"scroll",t)}function yt(e){const s=p.Tag.render(ft||(ft=Pt`<div class="intranet__language-popup_list"></div>`));Object.entries(e).forEach((([e,t])=>{const a=p.Tag.render(mt||(mt=Pt`
				<div class="intranet__language-popup_language-item">
					<span class="intranet__language-popup_language-item-name">${0}</span>
					<span class="intranet__language-popup_language-beta">${0}</span>
				</div>
			`),t.NAME,t.IS_BETA?", beta":"");p.Event.bind(a,"click",(()=>{this.switchPortalLanguage(e)}));p.Dom.append(a,s)}));return s}const wt=new gt;const kt=new Ie;window.showPartnerForm=u;window.B24={licenseInfoPopup:{show(e,s,t,a){const i=p.Reflection.getClass("BX.Bitrix24.LicenseInfoPopup");if(i){i.show(e,s,t,a)}}},updateCounters(e,s){const t=p.Reflection.getClass("BX.Intranet.LeftMenu");if(t){t.updateCounters(e,s)}}};e.languageSwitcher=wt;e.PartnerForm=m;e.Template=kt;e.SearchTitle=ze;e.InvitationButton=ot;e.LicenseButton=As;e.AvatarButton=bs})(this.BX.Intranet.Bitrix24=this.BX.Intranet.Bitrix24||{},BX.UI,BX.Intranet,BX.Timeman,BX.Bitrix24,BX.Intranet,BX.UI,BX,BX.Cache,BX.Event,BX.Intranet,BX.Intranet,BX.UI,BX);
//# sourceMappingURL=bitrix24.bundle.map.js